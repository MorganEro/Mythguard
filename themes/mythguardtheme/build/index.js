(()=>{"use strict";var e,t={245:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a="(prefers-reduced-motion: reduce)";function o(e){e.length=0}function r(e,t,n){return Array.prototype.slice.call(e,t,n)}function s(e){return e.bind.apply(e,[null].concat(r(arguments,1)))}var c=setTimeout,l=function(){};function d(e){return requestAnimationFrame(e)}function u(e,t){return typeof t===e}function f(e){return!v(e)&&u("object",e)}var h=Array.isArray,m=s(u,"function"),g=s(u,"string"),p=s(u,"undefined");function v(e){return null===e}function y(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function b(e){return h(e)?e:[e]}function w(e,t){b(e).forEach(t)}function C(e,t){return e.indexOf(t)>-1}function D(e,t){return e.push.apply(e,b(t)),e}function E(e,t,n){e&&w(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function x(e,t){E(e,g(t)?t.split(" "):t,!0)}function M(e,t){w(t,e.appendChild.bind(e))}function S(e,t){w(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function k(e,t){return y(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function _(e,t){var n=e?r(e.children):[];return t?n.filter((function(e){return k(e,t)})):n}function T(e,t){return t?_(e,t)[0]:e.firstElementChild}var F=Object.keys;function A(e,t,n){return e&&(n?F(e).reverse():F(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)})),e}function P(e){return r(arguments,1).forEach((function(t){A(t,(function(n,i){e[i]=t[i]}))})),e}function I(e){return r(arguments,1).forEach((function(t){A(t,(function(t,n){h(t)?e[n]=t.slice():f(t)?e[n]=I({},f(e[n])?e[n]:{},t):e[n]=t}))})),e}function O(e,t){w(t||F(e),(function(t){delete e[t]}))}function N(e,t){w(e,(function(e){w(t,(function(t){e&&e.removeAttribute(t)}))}))}function j(e,t,n){f(t)?A(t,(function(t,n){j(e,n,t)})):w(e,(function(e){v(n)||""===n?N(e,t):e.setAttribute(t,String(n))}))}function H(e,t,n){var i=document.createElement(e);return t&&(g(t)?x(i,t):j(i,t)),n&&M(n,i),i}function Y(e,t,n){if(p(n))return getComputedStyle(e)[t];v(n)||(e.style[t]=""+n)}function q(e,t){Y(e,"display",t)}function $(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function B(e,t){return e.getAttribute(t)}function R(e,t){return e&&e.classList.contains(t)}function G(e){return e.getBoundingClientRect()}function z(e){w(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function W(e){return T((new DOMParser).parseFromString(e,"text/html").body)}function U(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function V(e,t){return e&&e.querySelector(t)}function K(e,t){return t?r(e.querySelectorAll(t)):[]}function J(e,t){E(e,t,!1)}function X(e){return e.timeStamp}function Z(e){return g(e)?e:e?e+"px":""}var Q="splide",ee="data-"+Q;function te(e,t){if(!e)throw new Error("["+Q+"] "+(t||""))}var ne=Math.min,ie=Math.max,ae=Math.floor,oe=Math.ceil,re=Math.abs;function se(e,t,n){return re(e-t)<n}function ce(e,t,n,i){var a=ne(t,n),o=ie(t,n);return i?a<e&&e<o:a<=e&&e<=o}function le(e,t,n){var i=ne(t,n),a=ie(t,n);return ne(ie(i,e),a)}function de(e){return+(e>0)-+(e<0)}function ue(e,t){return w(t,(function(t){e=e.replace("%s",""+t)})),e}function fe(e){return e<10?"0"+e:""+e}var he={};function me(){var e=[];function t(e,t,n){w(e,(function(e){e&&w(t,(function(t){t.split(" ").forEach((function(t){var i=t.split(".");n(e,i[0],i[1])}))}))}))}return{bind:function(n,i,a,o){t(n,i,(function(t,n,i){var r="addEventListener"in t,s=r?t.removeEventListener.bind(t,n,a,o):t.removeListener.bind(t,a);r?t.addEventListener(n,a,o):t.addListener(a),e.push([t,n,i,a,s])}))},unbind:function(n,i,a){t(n,i,(function(t,n,i){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==i||a&&e[3]!==a)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var i,a=!0;return"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:a,detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,a,!1,n),e.dispatchEvent(i),i},destroy:function(){e.forEach((function(e){e[4]()})),o(e)}}}var ge="mounted",pe="ready",ve="move",ye="moved",be="click",we="refresh",Ce="updated",De="resize",Ee="resized",xe="scroll",Me="scrolled",Se="destroy",ke="navigation:mounted",_e="autoplay:play",Le="autoplay:pause",Te="lazyload:loaded",Fe="ei";function Ae(e){var t=e?e.event.bus:document.createDocumentFragment(),n=me();return e&&e.event.on(Se,n.destroy),P(n,{bus:t,on:function(e,i){n.bind(t,b(e).join(" "),(function(e){i.apply(i,h(e.detail)?e.detail:[])}))},off:s(n.unbind,t),emit:function(e){n.dispatch(t,e,r(arguments,1))}})}function Pe(e,t,n,i){var a,o,r=Date.now,s=0,c=!0,l=0;function u(){if(!c){if(s=e?ne((r()-a)/e,1):1,n&&n(s),s>=1&&(t(),a=r(),i&&++l>=i))return f();o=d(u)}}function f(){c=!0}function h(){o&&cancelAnimationFrame(o),s=0,o=0,c=!0}return{start:function(t){t||h(),a=r()-(t?s*e:0),c=!1,o=d(u)},rewind:function(){a=r(),s=0,n&&n(s)},pause:f,cancel:h,set:function(t){e=t},isPaused:function(){return c}}}var Ie="Arrow",Oe=Ie+"Left",Ne=Ie+"Right",je=Ie+"Up",He=Ie+"Down",Ye="ttb",qe={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[je,Ne],ArrowRight:[He,Oe]};var $e="role",Be="tabindex",Re="aria-",Ge=Re+"controls",ze=Re+"current",We=Re+"selected",Ue=Re+"label",Ve=Re+"labelledby",Ke=Re+"hidden",Je=Re+"orientation",Xe=Re+"roledescription",Ze=Re+"live",Qe=Re+"busy",et=Re+"atomic",tt=[$e,Be,"disabled",Ge,ze,Ue,Ve,Ke,Je,Xe],nt=Q+"__",it="is-",at=Q,ot=nt+"track",rt=nt+"list",st=nt+"slide",ct=st+"--clone",lt=st+"__container",dt=nt+"arrows",ut=nt+"arrow",ft=ut+"--prev",ht=ut+"--next",mt=nt+"pagination",gt=mt+"__page",pt=nt+"progress__bar",vt=nt+"toggle",yt=nt+"sr",bt=it+"initialized",wt=it+"active",Ct=it+"prev",Dt=it+"next",Et=it+"visible",xt=it+"loading",Mt=it+"focus-in",St=it+"overflow",kt=[wt,Et,Ct,Dt,xt,Mt,St],_t={slide:st,clone:ct,arrows:dt,arrow:ut,prev:ft,next:ht,pagination:mt,page:gt,spinner:nt+"spinner"},Lt="touchstart mousedown",Tt="touchmove mousemove",Ft="touchend touchcancel mouseup click",At="slide",Pt="loop",It="fade";var Ot=ee+"-interval",Nt={passive:!1,capture:!0},jt={Spacebar:" ",Right:Ne,Left:Oe,Up:je,Down:He};function Ht(e){return e=g(e)?e:e.key,jt[e]||e}var Yt="keydown",qt=ee+"-lazy",$t=qt+"-srcset",Bt="["+qt+"], ["+$t+"]",Rt=[" ","Enter"],Gt=Object.freeze({__proto__:null,Media:function(e,t,n){var i=e.state,o=n.breakpoints||{},r=n.reducedMotion||{},s=me(),c=[];function l(e){e&&s.destroy()}function d(e,t){var n=matchMedia(t);s.bind(n,"change",u),c.push([e,n])}function u(){var t=i.is(7),a=n.direction,o=c.reduce((function(e,t){return I(e,t[1].matches?t[0]:{})}),{});O(n),f(o),n.destroy?e.destroy("completely"===n.destroy):t?(l(!0),e.mount()):a!==n.direction&&e.refresh()}function f(t,a,o){I(n,t),a&&I(Object.getPrototypeOf(n),t),!o&&i.is(1)||e.emit(Ce,n)}return{setup:function(){var e="min"===n.mediaQuery;F(o).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){d(o[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),d(r,a),u()},destroy:l,reduce:function(e){matchMedia(a).matches&&(e?I(n,r):O(n,F(r)))},set:f}},Direction:function(e,t,n){return{resolve:function(e,t,i){var a="rtl"!==(i=i||n.direction)||t?i===Ye?0:-1:1;return qe[e]&&qe[e][a]||e.replace(/width|left|right/i,(function(e,t){var n=qe[e.toLowerCase()][a]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var i,a,r,s=Ae(e),c=s.on,l=s.bind,d=e.root,u=n.i18n,f={},h=[],g=[],p=[];function v(){var e,t,o;i=w("."+ot),a=T(i,"."+rt),te(i&&a,"A track/list element is missing."),D(h,_(a,"."+st+":not(."+ct+")")),A({arrows:dt,pagination:mt,prev:ft,next:ht,bar:pt,toggle:vt},(function(e,t){f[t]=w("."+e)})),P(f,{root:d,track:i,list:a,slides:h}),t=d.id||""+(e=Q)+fe(he[e]=(he[e]||0)+1),o=n.role,d.id=t,i.id=i.id||t+"-track",a.id=a.id||t+"-list",!B(d,$e)&&"SECTION"!==d.tagName&&o&&j(d,$e,o),j(d,Xe,u.carousel),j(a,$e,"presentation"),b()}function y(e){var t=tt.concat("style");o(h),J(d,g),J(i,p),N([i,a],t),N(d,e?t:["style",Xe])}function b(){J(d,g),J(i,p),g=C(at),p=C(ot),x(d,g),x(i,p),j(d,Ue,n.label),j(d,Ve,n.labelledby)}function w(e){var t=V(d,e);return t&&function(e,t){if(m(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!k(n,t);)n=n.parentElement;return n}(t,"."+at)===d?t:void 0}function C(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===at&&wt]}return P(f,{setup:v,mount:function(){c(we,y),c(we,v),c(Ce,b),l(document,Lt+" keydown",(function(e){r="keydown"===e.type}),{capture:!0}),l(d,"focusin",(function(){E(d,Mt,!!r)}))},destroy:y})},Slides:function(e,t,n){var i=Ae(e),a=i.on,r=i.emit,c=i.bind,l=t.Elements,d=l.slides,u=l.list,f=[];function h(){d.forEach((function(e,t){v(e,t,-1)}))}function p(){_((function(e){e.destroy()})),o(f)}function v(t,n,i){var a=function(e,t,n,i){var a,o=Ae(e),r=o.on,c=o.emit,l=o.bind,d=e.Components,u=e.root,f=e.options,h=f.isNavigation,m=f.updateOnMove,g=f.i18n,p=f.pagination,v=f.slideFocus,y=d.Direction.resolve,b=B(i,"style"),w=B(i,Ue),C=n>-1,D=T(i,"."+lt);function x(){var a=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");j(i,Ue,ue(g.slideX,(C?n:t)+1)),j(i,Ge,a),j(i,$e,v?"button":""),v&&N(i,Xe)}function M(){a||S()}function S(){if(!a){var n=e.index;(o=k())!==R(i,wt)&&(E(i,wt,o),j(i,ze,h&&o||""),c(o?"active":"inactive",_)),function(){var t=function(){if(e.is(It))return k();var t=G(d.Elements.track),n=G(i),a=y("left",!0),o=y("right",!0);return ae(t[a])<=oe(n[a])&&ae(n[o])<=oe(t[o])}(),n=!t&&(!k()||C);if(e.state.is([4,5])||j(i,Ke,n||""),j(K(i,f.focusableNodes||""),Be,n?-1:""),v&&j(i,Be,n?-1:0),t!==R(i,Et)&&(E(i,Et,t),c(t?"visible":"hidden",_)),!t&&document.activeElement===i){var a=d.Slides.getAt(e.index);a&&$(a.slide)}}(),E(i,Ct,t===n-1),E(i,Dt,t===n+1)}var o}function k(){var i=e.index;return i===t||f.cloneStatus&&i===n}var _={index:t,slideIndex:n,slide:i,container:D,isClone:C,mount:function(){C||(i.id=u.id+"-slide"+fe(t+1),j(i,$e,p?"tabpanel":"group"),j(i,Xe,g.slide),j(i,Ue,w||ue(g.slideLabel,[t+1,e.length]))),l(i,"click",s(c,be,_)),l(i,"keydown",s(c,"sk",_)),r([ye,"sh",Me],S),r(ke,x),m&&r(ve,M)},destroy:function(){a=!0,o.destroy(),J(i,kt),N(i,tt),j(i,"style",b),j(i,Ue,w||"")},update:S,style:function(e,t,n){Y(n&&D||i,e,t)},isWithin:function(n,i){var a=re(n-t);return C||!f.rewind&&!e.is(Pt)||(a=ne(a,e.length-a)),a<=i}};return _}(e,n,i,t);a.mount(),f.push(a),f.sort((function(e,t){return e.index-t.index}))}function D(e){return e?L((function(e){return!e.isClone})):f}function _(e,t){D(t).forEach(e)}function L(e){return f.filter(m(e)?e:function(t){return g(e)?k(t.slide,e):C(b(e),t.index)})}return{mount:function(){h(),a(we,p),a(we,h)},destroy:p,update:function(){_((function(e){e.update()}))},register:v,get:D,getIn:function(e){var i=t.Controller,a=i.toIndex(e),o=i.hasFocus()?1:n.perPage;return L((function(e){return ce(e.index,a,a+o-1)}))},getAt:function(e){return L(e)[0]},add:function(e,t){w(e,(function(e){if(g(e)&&(e=W(e)),y(e)){var i=d[t];i?S(e,i):M(u,e),x(e,n.classes.slide),a=e,o=s(r,De),l=K(a,"img"),(f=l.length)?l.forEach((function(e){c(e,"load error",(function(){--f||o()}))})):o()}var a,o,l,f})),r(we)},remove:function(e){z(L(e).map((function(e){return e.slide}))),r(we)},forEach:_,filter:L,style:function(e,t,n){_((function(i){i.style(e,t,n)}))},getLength:function(e){return e?d.length:f.length},isEnough:function(){return f.length>n.perPage}}},Layout:function(e,t,n){var i,a,o,r=Ae(e),c=r.on,l=r.bind,d=r.emit,u=t.Slides,h=t.Direction.resolve,m=t.Elements,g=m.root,p=m.track,v=m.list,y=u.getAt,b=u.style;function w(){i=n.direction===Ye,Y(g,"maxWidth",Z(n.width)),Y(p,h("paddingLeft"),D(!1)),Y(p,h("paddingRight"),D(!0)),C(!0)}function C(e){var t,r=G(g);(e||a.width!==r.width||a.height!==r.height)&&(Y(p,"height",(t="",i&&(te(t=x(),"height or heightRatio is missing."),t="calc("+t+" - "+D(!1)+" - "+D(!0)+")"),t)),b(h("marginRight"),Z(n.gap)),b("width",n.autoWidth?null:Z(n.fixedWidth)||(i?"":M())),b("height",Z(n.fixedHeight)||(i?n.autoHeight?null:M():x()),!0),a=r,d(Ee),o!==(o=F())&&(E(g,St,o),d("overflow",o)))}function D(e){var t=n.padding,i=h(e?"right":"left");return t&&Z(t[i]||(f(t)?0:t))||"0px"}function x(){return Z(n.height||G(v).width*n.heightRatio)}function M(){var e=Z(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function S(){return G(v)[h("width")]}function k(e,t){var n=y(e||0);return n?G(n.slide)[h("width")]+(t?0:T()):0}function _(e,t){var n=y(e);if(n){var i=G(n.slide)[h("right")],a=G(v)[h("left")];return re(i-a)+(t?0:T())}return 0}function L(t){return _(e.length-1)-_(0)+k(0,t)}function T(){var e=y(0);return e&&parseFloat(Y(e.slide,h("marginRight")))||0}function F(){return e.is(It)||L(!0)>S()}return{mount:function(){var e,t;w(),l(window,"resize load",(e=s(d,De),t=Pe(0,e,null,1),function(){t.isPaused()&&t.start()})),c([Ce,we],w),c(De,C)},resize:C,listSize:S,slideSize:k,sliderSize:L,totalSize:_,getPadding:function(e){return parseFloat(Y(p,h("padding"+(e?"Right":"Left"))))||0},isOverflow:F}},Clones:function(e,t,n){var i,a=Ae(e),r=a.on,s=t.Elements,c=t.Slides,l=t.Direction.resolve,d=[];function u(){r(we,f),r([Ce,De],m),(i=g())&&(function(t){var i=c.get().slice(),a=i.length;if(a){for(;i.length<t;)D(i,i);D(i.slice(-t),i.slice(0,t)).forEach((function(o,r){var l=r<t,u=function(t,i){var a=t.cloneNode(!0);return x(a,n.classes.clone),a.id=e.root.id+"-clone"+fe(i+1),a}(o.slide,r);l?S(u,i[0].slide):M(s.list,u),D(d,u),c.register(u,r-t+(l?0:a),o.index)}))}}(i),t.Layout.resize(!0))}function f(){h(),u()}function h(){z(d),o(d),a.destroy()}function m(){var e=g();i!==e&&(i<e||!e)&&a.emit(we)}function g(){var i=n.clones;if(e.is(Pt)){if(p(i)){var a=n[l("fixedWidth")]&&t.Layout.slideSize(0);i=a&&oe(G(s.track)[l("width")]/a)||n[l("autoWidth")]&&e.length||2*n.perPage}}else i=0;return i}return{mount:u,destroy:h}},Move:function(e,t,n){var i,a=Ae(e),o=a.on,r=a.emit,s=e.state.set,c=t.Layout,l=c.slideSize,d=c.getPadding,u=c.totalSize,f=c.listSize,h=c.sliderSize,m=t.Direction,g=m.resolve,v=m.orient,y=t.Elements,b=y.list,w=y.track;function C(){t.Controller.isBusy()||(t.Scroll.cancel(),D(e.index),t.Slides.update())}function D(e){E(k(e,!0))}function E(n,i){if(!e.is(It)){var a=i?n:function(n){if(e.is(Pt)){var i=S(n),a=i>t.Controller.getEnd();(i<0||a)&&(n=x(n,a))}return n}(n);Y(b,"transform","translate"+g("X")+"("+a+"px)"),n!==a&&r("sh")}}function x(e,t){var n=e-L(t),i=h();return e-v(i*(oe(re(n)/i)||1))*(t?1:-1)}function M(){E(_(),!0),i.cancel()}function S(e){for(var n=t.Slides.get(),i=0,a=1/0,o=0;o<n.length;o++){var r=n[o].index,s=re(k(r,!0)-e);if(!(s<=a))break;a=s,i=r}return i}function k(t,i){var a=v(u(t-1)-function(e){var t=n.focus;return"center"===t?(f()-l(e,!0))/2:+t*l(e)||0}(t));return i?function(t){return n.trimSpace&&e.is(At)&&(t=le(t,0,v(h(!0)-f()))),t}(a):a}function _(){var e=g("left");return G(b)[e]-G(w)[e]+v(d(!1))}function L(e){return k(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){i=t.Transition,o([ge,Ee,Ce,we],C)},move:function(e,t,n,a){var o,c;e!==t&&(o=e>n,c=v(x(_(),o)),o?c>=0:c<=b[g("scrollWidth")]-G(w)[g("width")])&&(M(),E(x(_(),e>n),!0)),s(4),r(ve,t,n,e),i.start(t,(function(){s(3),r(ye,t,n,e),a&&a()}))},jump:D,translate:E,shift:x,cancel:M,toIndex:S,toPosition:k,getPosition:_,getLimit:L,exceededLimit:function(e,t){t=p(t)?_():t;var n=!0!==e&&v(t)<v(L(!1)),i=!1!==e&&v(t)>v(L(!0));return n||i},reposition:C}},Controller:function(e,t,n){var i,a,o,r,c=Ae(e),l=c.on,d=c.emit,u=t.Move,f=u.getPosition,h=u.getLimit,m=u.toPosition,v=t.Slides,y=v.isEnough,b=v.getLength,w=n.omitEnd,C=e.is(Pt),D=e.is(At),E=s(L,!1),x=s(L,!0),M=n.start||0,S=M;function k(){a=b(!0),o=n.perMove,r=n.perPage,i=A();var e=le(M,0,w?i:a-1);e!==M&&(M=e,u.reposition())}function _(){i!==A()&&d(Fe)}function L(e,t){var n=o||(N()?1:r),a=T(M+n*(e?-1:1),M,!(o||N()));return-1===a&&D&&!se(f(),h(!e),1)?e?0:i:t?a:F(a)}function T(t,s,c){if(y()||N()){var l=function(t){if(D&&"move"===n.trimSpace&&t!==M)for(var i=f();i===m(t,!0)&&ce(t,0,e.length-1,!n.rewind);)t<M?--t:++t;return t}(t);l!==t&&(s=t,t=l,c=!1),t<0||t>i?t=o||!ce(0,t,s,!0)&&!ce(i,s,t,!0)?C?c?t<0?-(a%r||r):a:t:n.rewind?t<0?i:0:-1:P(I(t)):c&&t!==s&&(t=P(I(s)+(t<s?-1:1)))}else t=-1;return t}function F(e){return C?(e+a)%a||0:e}function A(){for(var e=a-(N()||C&&o?1:r);w&&e-- >0;)if(m(a-1,!0)!==m(e,!0)){e++;break}return le(e,0,a-1)}function P(e){return le(N()?e:r*e,0,i)}function I(e){return N()?ne(e,i):ae((e>=i?a-1:e)/r)}function O(e){e!==M&&(S=M,M=e)}function N(){return!p(n.focus)||n.isNavigation}function j(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){k(),l([Ce,we,Fe],k),l(Ee,_)},go:function(e,t,n){if(!j()){var a=function(e){var t=M;if(g(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],a=n[1],o=n[2];"+"===a||"-"===a?t=T(M+ +(""+a+(+o||1)),M):">"===a?t=o?P(+o):E(!0):"<"===a&&(t=x(!0))}else t=C?e:le(e,0,i);return t}(e),o=F(a);o>-1&&(t||o!==M)&&(O(o),u.move(a,o,S,n))}},scroll:function(e,n,a,o){t.Scroll.scroll(e,n,a,(function(){var e=F(u.toIndex(f()));O(w?ne(e,i):e),o&&o()}))},getNext:E,getPrev:x,getAdjacent:L,getEnd:A,setIndex:O,getIndex:function(e){return e?S:M},toIndex:P,toPage:I,toDest:function(e){var t=u.toIndex(e);return D?le(t,0,i):t},hasFocus:N,isBusy:j}},Arrows:function(e,t,n){var i,a,o=Ae(e),r=o.on,c=o.bind,l=o.emit,d=n.classes,u=n.i18n,f=t.Elements,h=t.Controller,m=f.arrows,g=f.track,p=m,v=f.prev,y=f.next,b={};function w(){var e;!(e=n.arrows)||v&&y||(p=m||H("div",d.arrows),v=k(!0),y=k(!1),i=!0,M(p,[v,y]),!m&&S(p,g)),v&&y&&(P(b,{prev:v,next:y}),q(p,e?"":"none"),x(p,a=dt+"--"+n.direction),e&&(r([ge,ye,we,Me,Fe],_),c(y,"click",s(E,">")),c(v,"click",s(E,"<")),_(),j([v,y],Ge,g.id),l("arrows:mounted",v,y))),r(Ce,C)}function C(){D(),w()}function D(){o.destroy(),J(p,a),i?(z(m?[v,y]:p),v=y=null):N([v,y],tt)}function E(e){h.go(e,!0)}function k(e){return W('<button class="'+d.arrow+" "+(e?d.prev:d.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function _(){if(v&&y){var t=e.index,n=h.getPrev(),i=h.getNext(),a=n>-1&&t<n?u.last:u.prev,o=i>-1&&t>i?u.first:u.next;v.disabled=n<0,y.disabled=i<0,j(v,Ue,a),j(y,Ue,o),l("arrows:updated",v,y,n,i)}}return{arrows:b,mount:w,destroy:D,update:_}},Autoplay:function(e,t,n){var i,a,o=Ae(e),r=o.on,s=o.bind,c=o.emit,l=Pe(n.interval,e.go.bind(e,">"),(function(e){var t=u.bar;t&&Y(t,"width",100*e+"%"),c("autoplay:playing",e)})),d=l.isPaused,u=t.Elements,f=t.Elements,h=f.root,m=f.toggle,g=n.autoplay,p="pause"===g;function v(){d()&&t.Slides.isEnough()&&(l.start(!n.resetProgress),a=i=p=!1,w(),c(_e))}function y(e){void 0===e&&(e=!0),p=!!e,w(),d()||(l.pause(),c(Le))}function b(){p||(i||a?y(!1):v())}function w(){m&&(E(m,wt,!p),j(m,Ue,n.i18n[p?"play":"pause"]))}function C(e){var i=t.Slides.getAt(e);l.set(i&&+B(i.slide,Ot)||n.interval)}return{mount:function(){g&&(n.pauseOnHover&&s(h,"mouseenter mouseleave",(function(e){i="mouseenter"===e.type,b()})),n.pauseOnFocus&&s(h,"focusin focusout",(function(e){a="focusin"===e.type,b()})),m&&s(m,"click",(function(){p?v():y(!0)})),r([ve,xe,we],l.rewind),r(ve,C),m&&j(m,Ge,u.track.id),p||v(),w())},destroy:l.cancel,play:v,pause:y,isPaused:d}},Cover:function(e,t,n){var i=Ae(e).on;function a(e){t.Slides.forEach((function(t){var n=T(t.container||t.slide,"img");n&&n.src&&o(e,n,t)}))}function o(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),q(t,e?"none":"")}return{mount:function(){n.cover&&(i(Te,s(o,!0)),i([ge,Ce,we],s(a,!0)))},destroy:s(a,!1)}},Scroll:function(e,t,n){var i,a,o=Ae(e),r=o.on,c=o.emit,l=e.state.set,d=t.Move,u=d.getPosition,f=d.getLimit,h=d.exceededLimit,m=d.translate,g=e.is(At),p=1;function v(e,n,o,r,f){var m=u();if(w(),o&&(!g||!h())){var v=t.Layout.sliderSize(),C=de(e)*v*ae(re(e)/v)||0;e=d.toPosition(t.Controller.toDest(e%v))+C}var D=se(m,e,1);p=1,n=D?0:n||ie(re(e-m)/1.5,800),a=r,i=Pe(n,y,s(b,m,e,f),1),l(5),c(xe),i.start()}function y(){l(3),a&&a(),c(Me)}function b(e,t,i,o){var r,s,c=u(),l=(e+(t-e)*(r=o,(s=n.easingFunc)?s(r):1-Math.pow(1-r,4))-c)*p;m(c+l),g&&!i&&h()&&(p*=.6,re(l)<10&&v(f(h(!0)),600,!1,a,!0))}function w(){i&&i.cancel()}function C(){i&&!i.isPaused()&&(w(),y())}return{mount:function(){r(ve,w),r([Ce,we],C)},destroy:w,scroll:v,cancel:C}},Drag:function(e,t,n){var i,a,o,r,s,c,d,u,h=Ae(e),m=h.on,g=h.emit,p=h.bind,v=h.unbind,y=e.state,b=t.Move,w=t.Scroll,C=t.Controller,D=t.Elements.track,E=t.Media.reduce,x=t.Direction,M=x.resolve,S=x.orient,_=b.getPosition,L=b.exceededLimit,T=!1;function F(){var e=n.drag;B(!e),r="free"===e}function A(e){if(c=!1,!d){var t=$(e);i=e.target,a=n.noDrag,k(i,"."+gt+", ."+ut)||a&&k(i,a)||!t&&e.button||(C.isBusy()?U(e,!0):(u=t?D:window,s=y.is([4,5]),o=null,p(u,Tt,P,Nt),p(u,Ft,I,Nt),b.cancel(),w.cancel(),N(e)))}var i,a}function P(t){if(y.is(6)||(y.set(6),g("drag")),t.cancelable)if(s){b.translate(i+j(t)/(T&&e.is(At)?5:1));var a=H(t)>200,o=T!==(T=L());(a||o)&&N(t),c=!0,g("dragging"),U(t)}else(function(e){return re(j(e))>re(j(e,!0))})(t)&&(s=function(e){var t=n.dragMinThreshold,i=f(t),a=i&&t.mouse||0,o=(i?t.touch:+t)||10;return re(j(e))>($(e)?o:a)}(t),U(t))}function I(i){y.is(6)&&(y.set(3),g("dragged")),s&&(function(i){var a=function(t){if(e.is(Pt)||!T){var n=H(t);if(n&&n<200)return j(t)/n}return 0}(i),o=function(e){return _()+de(e)*ne(re(e)*(n.flickPower||600),r?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(a),s=n.rewind&&n.rewindByDrag;E(!1),r?C.scroll(o,0,n.snap):e.is(It)?C.go(S(de(a))<0?s?"<":"-":s?">":"+"):e.is(At)&&T&&s?C.go(L(!0)?">":"<"):C.go(C.toDest(o),!0),E(!0)}(i),U(i)),v(u,Tt,P),v(u,Ft,I),s=!1}function O(e){!d&&c&&U(e,!0)}function N(e){o=a,a=e,i=_()}function j(e,t){return q(e,t)-q(Y(e),t)}function H(e){return X(e)-X(Y(e))}function Y(e){return a===e&&o||a}function q(e,t){return($(e)?e.changedTouches[0]:e)["page"+M(t?"Y":"X")]}function $(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function B(e){d=e}return{mount:function(){p(D,Tt,l,Nt),p(D,Ft,l,Nt),p(D,Lt,A,Nt),p(D,"click",O,{capture:!0}),p(D,"dragstart",U),m([ge,Ce],F)},disable:B,isDragging:function(){return s}}},Keyboard:function(e,t,n){var i,a,o=Ae(e),r=o.on,s=o.bind,l=o.unbind,d=e.root,u=t.Direction.resolve;function f(){var e=n.keyboard;e&&(i="global"===e?window:d,s(i,Yt,g))}function h(){l(i,Yt)}function m(){var e=a;a=!0,c((function(){a=e}))}function g(t){if(!a){var n=Ht(t);n===u(Oe)?e.go("<"):n===u(Ne)&&e.go(">")}}return{mount:function(){f(),r(Ce,h),r(Ce,f),r(ve,m)},destroy:h,disable:function(e){a=e}}},LazyLoad:function(e,t,n){var i=Ae(e),a=i.on,r=i.off,c=i.bind,l=i.emit,d="sequential"===n.lazyLoad,u=[ye,Me],f=[];function h(){o(f),t.Slides.forEach((function(e){K(e.slide,Bt).forEach((function(t){var i=B(t,qt),a=B(t,$t);if(i!==t.src||a!==t.srcset){var o=n.classes.spinner,r=t.parentElement,s=T(r,"."+o)||H("span",o,r);f.push([t,e,s]),t.src||q(t,"none")}}))})),d?v():(r(u),a(u,m),m())}function m(){(f=f.filter((function(t){var i=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,i)||g(t)}))).length||r(u)}function g(e){var t=e[0];x(e[1].slide,xt),c(t,"load error",s(p,e)),j(t,"src",B(t,qt)),j(t,"srcset",B(t,$t)),N(t,qt),N(t,$t)}function p(e,t){var n=e[0],i=e[1];J(i.slide,xt),"error"!==t.type&&(z(e[2]),q(n,""),l(Te,n,i),l(De)),d&&v()}function v(){f.length&&g(f.shift())}return{mount:function(){n.lazyLoad&&(h(),a(we,h))},destroy:s(o,f),check:m}},Pagination:function(e,t,n){var i,a,c=Ae(e),l=c.on,d=c.emit,u=c.bind,f=t.Slides,h=t.Elements,m=t.Controller,g=m.hasFocus,p=m.getIndex,v=m.go,y=t.Direction.resolve,b=h.pagination,w=[];function C(){i&&(z(b?r(i.children):i),J(i,a),o(w),i=null),c.destroy()}function D(e){v(">"+e,!0)}function E(e,t){var n=w.length,i=Ht(t),a=M(),o=-1;i===y(Ne,!1,a)?o=++e%n:i===y(Oe,!1,a)?o=(--e+n)%n:"Home"===i?o=0:"End"===i&&(o=n-1);var r=w[o];r&&($(r.button),v(">"+o),U(t,!0))}function M(){return n.paginationDirection||n.direction}function S(e){return w[m.toPage(e)]}function k(){var e=S(p(!0)),t=S(p());if(e){var n=e.button;J(n,wt),N(n,We),j(n,Be,-1)}if(t){var a=t.button;x(a,wt),j(a,We,!0),j(a,Be,"")}d("pagination:updated",{list:i,items:w},e,t)}return{items:w,mount:function t(){C(),l([Ce,we,Fe],t);var o=n.pagination;b&&q(b,o?"":"none"),o&&(l([ve,xe,Me],k),function(){var t=e.length,o=n.classes,r=n.i18n,c=n.perPage,l=g()?m.getEnd()+1:oe(t/c);x(i=b||H("ul",o.pagination,h.track.parentElement),a=mt+"--"+M()),j(i,$e,"tablist"),j(i,Ue,r.select),j(i,Je,M()===Ye?"vertical":"");for(var d=0;d<l;d++){var p=H("li",null,i),v=H("button",{class:o.page,type:"button"},p),y=f.getIn(d).map((function(e){return e.slide.id})),C=!g()&&c>1?r.pageX:r.slideX;u(v,"click",s(D,d)),n.paginationKeyboard&&u(v,"keydown",s(E,d)),j(p,$e,"presentation"),j(v,$e,"tab"),j(v,Ge,y.join(" ")),j(v,Ue,ue(C,d+1)),j(v,Be,-1),w.push({li:p,button:v,page:d})}}(),k(),d("pagination:mounted",{list:i,items:w},S(e.index)))},destroy:C,getAt:S,update:k}},Sync:function(e,t,n){var i=n.isNavigation,a=n.slideFocus,r=[];function c(){var t,n;e.splides.forEach((function(t){t.isParent||(d(e,t.splide),d(t.splide,e))})),i&&((n=(t=Ae(e)).on)(be,f),n("sk",h),n([ge,Ce],u),r.push(t),t.emit(ke,e.splides))}function l(){r.forEach((function(e){e.destroy()})),o(r)}function d(e,t){var n=Ae(e);n.on(ve,(function(e,n,i){t.go(t.is(Pt)?i:e)})),r.push(n)}function u(){j(t.Elements.list,Je,n.direction===Ye?"vertical":"")}function f(t){e.go(t.index)}function h(e,t){C(Rt,Ht(t))&&(f(e),U(t))}return{setup:s(t.Media.set,{slideFocus:p(a)?i:a},!0),mount:c,destroy:l,remount:function(){l(),c()}}},Wheel:function(e,t,n){var i=Ae(e).bind,a=0;function o(i){if(i.cancelable){var o=i.deltaY,r=o<0,s=X(i),c=n.wheelMinThreshold||0,l=n.wheelSleep||0;re(o)>c&&s-a>l&&(e.go(r?"<":">"),a=s),function(i){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(i)}(r)&&U(i)}}return{mount:function(){n.wheel&&i(t.Elements.track,"wheel",o,Nt)}}},Live:function(e,t,n){var i=Ae(e).on,a=t.Elements.track,o=n.live&&!n.isNavigation,r=H("span",yt),c=Pe(90,s(l,!1));function l(e){j(a,Qe,e),e?(M(a,r),c.start()):(z(r),c.cancel())}function d(e){o&&j(a,Ze,e?"off":"polite")}return{mount:function(){o&&(d(!t.Autoplay.isPaused()),j(a,et,!0),r.textContent="…",i(_e,s(d,!0)),i(Le,s(d,!1)),i([ye,Me],s(l,!0)))},disable:d,destroy:function(){N(a,[Ze,et,Qe]),z(r)}}}}),zt={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:_t,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Wt(e,t,n){var i=t.Slides;function a(){i.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){Ae(e).on([ge,we],a)},start:function(e,t){i.style("transition","opacity "+n.speed+"ms "+n.easing),c(t)},cancel:l}}function Ut(e,t,n){var i,a=t.Move,o=t.Controller,r=t.Scroll,c=t.Elements.list,l=s(Y,c,"transition");function d(){l(""),r.cancel()}return{mount:function(){Ae(e).bind(c,"transitionend",(function(e){e.target===c&&i&&(d(),i())}))},start:function(t,s){var c=a.toPosition(t,!0),d=a.getPosition(),u=function(t){var i=n.rewindSpeed;if(e.is(At)&&i){var a=o.getIndex(!0),r=o.getEnd();if(0===a&&t>=r||a>=r&&0===t)return i}return n.speed}(t);re(c-d)>=1&&u>=1?n.useScroll?r.scroll(c,u,!1,s):(l("transform "+u+"ms "+n.easing),a.translate(c,!0),i=s):(a.jump(t),s())},cancel:d}}var Vt=function(){function e(t,n){var i;this.event=Ae(),this.Components={},this.state=(i=1,{set:function(e){i=e},is:function(e){return C(b(e),i)}}),this.splides=[],this._o={},this._E={};var a=g(t)?V(document,t):t;te(a,a+" is invalid."),this.root=a,n=I({label:B(a,Ue)||"",labelledby:B(a,Ve)||""},zt,e.defaults,n||{});try{I(n,JSON.parse(B(a,ee)))}catch(e){te(!1,"Invalid JSON")}this._o=Object.create(I({},n))}var t,n,a=e.prototype;return a.mount=function(e,t){var n=this,i=this.state,a=this.Components;return te(i.is([1,7]),"Already mounted!"),i.set(1),this._C=a,this._T=t||this._T||(this.is(It)?Wt:Ut),this._E=e||this._E,A(P({},Gt,this._E,{Transition:this._T}),(function(e,t){var i=e(n,a,n._o);a[t]=i,i.setup&&i.setup()})),A(a,(function(e){e.mount&&e.mount()})),this.emit(ge),x(this.root,bt),i.set(3),this.emit(pe),this},a.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},a.go=function(e){return this._C.Controller.go(e),this},a.on=function(e,t){return this.event.on(e,t),this},a.off=function(e){return this.event.off(e),this},a.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(r(arguments,1))),this},a.add=function(e,t){return this._C.Slides.add(e,t),this},a.remove=function(e){return this._C.Slides.remove(e),this},a.is=function(e){return this._o.type===e},a.refresh=function(){return this.emit(we),this},a.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Ae(this).on(pe,this.destroy.bind(this,e)):(A(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(Se),t.destroy(),e&&o(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Vt.defaults={},Vt.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};class Kt{constructor(){document.querySelector(".spinner-container")&&this.injectHTML()}getImageUrl(e){return`${mythguardData.root_url}/wp-content/themes/mythguardtheme/images/spinner/${e}`}injectHTML(){document.querySelectorAll(".spinner-container").forEach((e=>{e.innerHTML=this.getSpinnerHTML()}))}getSpinnerHTML(){return`\n      <div class="spinner-loader">\n        <div class="shield">\n          <img src="${this.getImageUrl("mythguard-shield.svg")}" alt="Loading..." />\n        </div>\n        <div class="emblem">\n          <img src="${this.getImageUrl("mythguard-emblem.svg")}" alt="Loading..." />\n        </div>\n      </div>\n    `}static render(){return(new Kt).getSpinnerHTML()}}const Jt=Kt;const Xt=new class{constructor(){this.createToastContainer(),this.activeToasts=new Set}createToastContainer(){this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container)}show(e,t="success"){const n=`${e}-${t}`;if(this.activeToasts.has(n))return;const i=document.createElement("div");i.className=`toast toast--${t}`,i.textContent=e,this.container.appendChild(i),this.activeToasts.add(n),setTimeout((()=>{i.classList.add("toast--fade"),setTimeout((()=>{i.remove(),this.activeToasts.delete(n)}),300)}),3e3)}confirm(e){return new Promise((t=>{const n=document.createElement("div");n.className="toast toast--confirm";const i=document.createElement("div");i.className="toast__message",i.textContent=e;const a=document.createElement("div");a.className="toast__actions";const o=document.createElement("button");o.className="toast__button toast__button--confirm",o.textContent="Confirm";const r=document.createElement("button");r.className="toast__button toast__button--cancel",r.textContent="Cancel",a.appendChild(o),a.appendChild(r),n.appendChild(i),n.appendChild(a),this.container.appendChild(n);const s=()=>{n.classList.add("toast--fade"),setTimeout((()=>n.remove()),300)};o.addEventListener("click",(()=>{s(),t(!0)})),r.addEventListener("click",(()=>{s(),t(!1)}))}))}};var Zt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Qt={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},en={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const tn=en;var nn=function(e,t){return void 0===t&&(t=2),("000"+e).slice(-1*t)},an=function(e){return!0===e?1:0};function on(e,t){var n;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(i,a)}),t)}}var rn=function(e){return e instanceof Array?e:[e]};function sn(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function cn(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function ln(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function dn(e,t){return t(e)?e:e.parentNode?dn(e.parentNode,t):void 0}function un(e,t){var n=cn("div","numInputWrapper"),i=cn("input","numInput "+e),a=cn("span","arrowUp"),o=cn("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var r in t)i.setAttribute(r,t[r]);return n.appendChild(i),n.appendChild(a),n.appendChild(o),n}function fn(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}var hn=function(){},mn=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},gn={D:hn,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*an(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var i=parseInt(t),a=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:hn,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:hn,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},pn={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},vn={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[vn.w(e,t,n)]},F:function(e,t,n){return mn(vn.n(e,t,n)-1,!1,t)},G:function(e,t,n){return nn(vn.h(e,t,n))},H:function(e){return nn(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[an(e.getHours()>11)]},M:function(e,t){return mn(e.getMonth(),!0,t)},S:function(e){return nn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return nn(e.getFullYear(),4)},d:function(e){return nn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return nn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return nn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},yn=function(e){var t=e.config,n=void 0===t?Qt:t,i=e.l10n,a=void 0===i?en:i,o=e.isMobile,r=void 0!==o&&o;return function(e,t,i){var o=i||a;return void 0===n.formatDate||r?t.split("").map((function(t,i,a){return vn[t]&&"\\"!==a[i-1]?vn[t](e,o,n):"\\"!==t?t:""})).join(""):n.formatDate(e,t,o)}},bn=function(e){var t=e.config,n=void 0===t?Qt:t,i=e.l10n,a=void 0===i?en:i;return function(e,t,i,o){if(0===e||e){var r,s=o||a,c=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var l=t||(n||Qt).dateFormat,d=String(e).trim();if("today"===d)r=new Date,i=!0;else if(n&&n.parseDate)r=n.parseDate(e,l);else if(/Z$/.test(d)||/GMT$/.test(d))r=new Date(e);else{for(var u=void 0,f=[],h=0,m=0,g="";h<l.length;h++){var p=l[h],v="\\"===p,y="\\"===l[h-1]||v;if(pn[p]&&!y){g+=pn[p];var b=new RegExp(g).exec(e);b&&(u=!0)&&f["Y"!==p?"push":"unshift"]({fn:gn[p],val:b[++m]})}else v||(g+=".")}r=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),f.forEach((function(e){var t=e.fn,n=e.val;return r=t(r,n,s)||r})),r=u?r:void 0}}if(r instanceof Date&&!isNaN(r.getTime()))return!0===i&&r.setHours(0,0,0,0),r;n.errorHandler(new Error("Invalid date provided: "+c))}}};function wn(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var Cn=function(e,t,n){return 3600*e+60*t+n};function Dn(e){var t=e.defaultHour,n=e.defaultMinute,i=e.defaultSeconds;if(void 0!==e.minDate){var a=e.minDate.getHours(),o=e.minDate.getMinutes(),r=e.minDate.getSeconds();t<a&&(t=a),t===a&&n<o&&(n=o),t===a&&n===o&&i<r&&(i=e.minDate.getSeconds())}if(void 0!==e.maxDate){var s=e.maxDate.getHours(),c=e.maxDate.getMinutes();(t=Math.min(t,s))===s&&(n=Math.min(c,n)),t===s&&n===c&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}n(990);var En=function(){return En=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},En.apply(this,arguments)},xn=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};function Mn(e,t){var n={config:En(En({},Qt),kn.defaultConfig),l10n:tn};function i(){var e;return(null===(e=n.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function a(e){return e.bind(n)}function o(){var e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){var t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function r(e){if(0===n.selectedDates.length){var t=void 0===n.config.minDate||wn(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),i=Dn(n.config);t.setHours(i.hours,i.minutes,i.seconds,t.getMilliseconds()),n.selectedDates=[t],n.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,i=fn(e),a=i;void 0!==n.amPM&&i===n.amPM&&(n.amPM.textContent=n.l10n.amPM[an(n.amPM.textContent===n.l10n.amPM[0])]);var o=parseFloat(a.getAttribute("min")),r=parseFloat(a.getAttribute("max")),s=parseFloat(a.getAttribute("step")),c=parseInt(a.value,10),l=c+s*(e.delta||(t?38===e.which?1:-1:0));if(void 0!==a.value&&2===a.value.length){var d=a===n.hourElement,u=a===n.minuteElement;l<o?(l=r+l+an(!d)+(an(d)&&an(!n.amPM)),u&&g(void 0,-1,n.hourElement)):l>r&&(l=a===n.hourElement?l-r-an(!n.amPM):o,u&&g(void 0,1,n.hourElement)),n.amPM&&d&&(1===s?l+c===23:Math.abs(l-c)>s)&&(n.amPM.textContent=n.l10n.amPM[an(n.amPM.textContent===n.l10n.amPM[0])]),a.value=nn(l)}}(e);var a=n._input.value;s(),Q(),n._input.value!==a&&n._debouncedChange()}function s(){if(void 0!==n.hourElement&&void 0!==n.minuteElement){var e,t,i=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,a=(parseInt(n.minuteElement.value,10)||0)%60,o=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;void 0!==n.amPM&&(e=i,t=n.amPM.textContent,i=e%12+12*an(t===n.l10n.amPM[1]));var r=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===wn(n.latestSelectedDateObj,n.config.minDate,!0),s=void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===wn(n.latestSelectedDateObj,n.config.maxDate,!0);if(void 0!==n.config.maxTime&&void 0!==n.config.minTime&&n.config.minTime>n.config.maxTime){var c=Cn(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),d=Cn(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),u=Cn(i,a,o);if(u>d&&u<c){var f=function(e){var t=Math.floor(e/3600),n=(e-3600*t)/60;return[t,n,e-3600*t-60*n]}(c);i=f[0],a=f[1],o=f[2]}}else{if(s){var h=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;(i=Math.min(i,h.getHours()))===h.getHours()&&(a=Math.min(a,h.getMinutes())),a===h.getMinutes()&&(o=Math.min(o,h.getSeconds()))}if(r){var m=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;(i=Math.max(i,m.getHours()))===m.getHours()&&a<m.getMinutes()&&(a=m.getMinutes()),a===m.getMinutes()&&(o=Math.max(o,m.getSeconds()))}}l(i,a,o)}}function c(e){var t=e||n.latestSelectedDateObj;t&&t instanceof Date&&l(t.getHours(),t.getMinutes(),t.getSeconds())}function l(e,t,i){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,i||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=nn(n.config.time_24hr?e:(12+e)%12+12*an(e%12==0)),n.minuteElement.value=nn(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[an(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=nn(i)))}function d(e){var t=fn(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&T(n)}function u(e,t,i,a){return t instanceof Array?t.forEach((function(t){return u(e,t,i,a)})):e instanceof Array?e.forEach((function(e){return u(e,t,i,a)})):(e.addEventListener(t,i,a),void n._handlers.push({remove:function(){return e.removeEventListener(t,i,a)}}))}function f(){V("onChange")}function h(e,t){var i=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),a=n.currentYear,o=n.currentMonth;try{void 0!==i&&(n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth())}catch(e){e.message="Invalid date supplied: "+i,n.config.errorHandler(e)}t&&n.currentYear!==a&&(V("onYearChange"),D()),!t||n.currentYear===a&&n.currentMonth===o||V("onMonthChange"),n.redraw()}function m(e){var t=fn(e);~t.className.indexOf("arrow")&&g(e,t.classList.contains("arrowUp")?1:-1)}function g(e,t,n){var i=e&&fn(e),a=n||i&&i.parentNode&&i.parentNode.firstChild,o=K("increment");o.delta=t,a&&a.dispatchEvent(o)}function p(e,t,i,a){var o=F(t,!0),r=cn("span",e,t.getDate().toString());return r.dateObj=t,r.$i=a,r.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===wn(t,n.now)&&(n.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),o?(r.tabIndex=-1,J(t)&&(r.classList.add("selected"),n.selectedDateElem=r,"range"===n.config.mode&&(sn(r,"startRange",n.selectedDates[0]&&0===wn(t,n.selectedDates[0],!0)),sn(r,"endRange",n.selectedDates[1]&&0===wn(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&wn(e,n.selectedDates[0])>=0&&wn(e,n.selectedDates[1])<=0}(t)&&!J(t)&&r.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&a%7==6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),V("onDayCreate",r),r}function v(e){e.focus(),"range"===n.config.mode&&O(e)}function y(e){for(var t=e>0?0:n.config.showMonths-1,i=e>0?n.config.showMonths:-1,a=t;a!=i;a+=e)for(var o=n.daysContainer.children[a],r=e>0?0:o.children.length-1,s=e>0?o.children.length:-1,c=r;c!=s;c+=e){var l=o.children[c];if(-1===l.className.indexOf("hidden")&&F(l.dateObj))return l}}function b(e,t){var a=i(),o=A(a||document.body),r=void 0!==e?e:o?a:void 0!==n.selectedDateElem&&A(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&A(n.todayDateElem)?n.todayDateElem:y(t>0?1:-1);void 0===r?n._input.focus():o?function(e,t){for(var i=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,a=t>0?n.config.showMonths:-1,o=t>0?1:-1,r=i-n.currentMonth;r!=a;r+=o)for(var s=n.daysContainer.children[r],c=i-n.currentMonth===r?e.$i+t:t<0?s.children.length-1:0,l=s.children.length,d=c;d>=0&&d<l&&d!=(t>0?l:-1);d+=o){var u=s.children[d];if(-1===u.className.indexOf("hidden")&&F(u.dateObj)&&Math.abs(e.$i-d)>=Math.abs(t))return v(u)}n.changeMonth(o),b(y(o),0)}(r,t):v(r)}function w(e,t){for(var i=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,a=n.utils.getDaysInMonth((t-1+12)%12,e),o=n.utils.getDaysInMonth(t,e),r=window.document.createDocumentFragment(),s=n.config.showMonths>1,c=s?"prevMonthDay hidden":"prevMonthDay",l=s?"nextMonthDay hidden":"nextMonthDay",d=a+1-i,u=0;d<=a;d++,u++)r.appendChild(p("flatpickr-day "+c,new Date(e,t-1,d),0,u));for(d=1;d<=o;d++,u++)r.appendChild(p("flatpickr-day",new Date(e,t,d),0,u));for(var f=o+1;f<=42-i&&(1===n.config.showMonths||u%7!=0);f++,u++)r.appendChild(p("flatpickr-day "+l,new Date(e,t+1,f%o),0,u));var h=cn("div","dayContainer");return h.appendChild(r),h}function C(){if(void 0!==n.daysContainer){ln(n.daysContainer),n.weekNumbers&&ln(n.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<n.config.showMonths;t++){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),e.appendChild(w(i.getFullYear(),i.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&O()}}function D(){if(!(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var i=cn("option","flatpickr-monthDropdown-month");i.value=new Date(n.currentYear,t).getMonth().toString(),i.textContent=mn(t,n.config.shorthandCurrentMonth,n.l10n),i.tabIndex=-1,n.currentMonth===t&&(i.selected=!0),n.monthsDropdownContainer.appendChild(i)}}}function E(){var e,t=cn("div","flatpickr-month"),i=window.document.createDocumentFragment();n.config.showMonths>1||"static"===n.config.monthSelectorType?e=cn("span","cur-month"):(n.monthsDropdownContainer=cn("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),u(n.monthsDropdownContainer,"change",(function(e){var t=fn(e),i=parseInt(t.value,10);n.changeMonth(i-n.currentMonth),V("onMonthChange")})),D(),e=n.monthsDropdownContainer);var a=un("cur-year",{tabindex:"-1"}),o=a.getElementsByTagName("input")[0];o.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&o.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(o.setAttribute("max",n.config.maxDate.getFullYear().toString()),o.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var r=cn("div","flatpickr-current-month");return r.appendChild(e),r.appendChild(a),i.appendChild(r),t.appendChild(i),{container:t,yearElement:o,monthElement:e}}function x(){ln(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var e=n.config.showMonths;e--;){var t=E();n.yearElements.push(t.yearElement),n.monthElements.push(t.monthElement),n.monthNav.appendChild(t.container)}n.monthNav.appendChild(n.nextMonthNav)}function M(){n.weekdayContainer?ln(n.weekdayContainer):n.weekdayContainer=cn("div","flatpickr-weekdays");for(var e=n.config.showMonths;e--;){var t=cn("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(t)}return S(),n.weekdayContainer}function S(){if(n.weekdayContainer){var e=n.l10n.firstDayOfWeek,t=xn(n.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=xn(t.splice(e,t.length),t.splice(0,e)));for(var i=n.config.showMonths;i--;)n.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function k(e,t){void 0===t&&(t=!0);var i=t?e:e-n.currentMonth;i<0&&!0===n._hidePrevMonthArrow||i>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=i,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,V("onYearChange"),D()),C(),V("onMonthChange"),X())}function _(e){return n.calendarContainer.contains(e)}function L(e){if(n.isOpen&&!n.config.inline){var t=fn(e),i=_(t),a=!(t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput))||i||_(e.relatedTarget)),o=!n.config.ignoredFocusElements.some((function(e){return e.contains(t)}));a&&o&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&r(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&n.clear(!1))}}function T(e){if(!(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())){var t=e,i=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),i&&(n.redraw(),V("onYearChange"),D())}}function F(e,t){var i;void 0===t&&(t=!0);var a=n.parseDate(e,void 0,t);if(n.config.minDate&&a&&wn(a,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&a&&wn(a,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===a)return!1;for(var o=!!n.config.enable,r=null!==(i=n.config.enable)&&void 0!==i?i:n.config.disable,s=0,c=void 0;s<r.length;s++){if("function"==typeof(c=r[s])&&c(a))return o;if(c instanceof Date&&void 0!==a&&c.getTime()===a.getTime())return o;if("string"==typeof c){var l=n.parseDate(c,void 0,!0);return l&&l.getTime()===a.getTime()?o:!o}if("object"==typeof c&&void 0!==a&&c.from&&c.to&&a.getTime()>=c.from.getTime()&&a.getTime()<=c.to.getTime())return o}return!o}function A(e){return void 0!==n.daysContainer&&-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e)}function P(e){var t=e.target===n._input,i=n._input.value.trimEnd()!==Z();!t||!i||e.relatedTarget&&_(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function I(t){var a=fn(t),o=n.config.wrap?e.contains(a):a===n._input,c=n.config.allowInput,l=n.isOpen&&(!c||!o),d=n.config.inline&&o&&!c;if(13===t.keyCode&&o){if(c)return n.setDate(n._input.value,!0,a===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),a.blur();n.open()}else if(_(a)||l||d){var u=!!n.timeContainer&&n.timeContainer.contains(a);switch(t.keyCode){case 13:u?(t.preventDefault(),r(),B()):R(t);break;case 27:t.preventDefault(),B();break;case 8:case 46:o&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(u||o)n.hourElement&&n.hourElement.focus();else{t.preventDefault();var f=i();if(void 0!==n.daysContainer&&(!1===c||f&&A(f))){var h=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),k(h),b(y(1),0)):b(void 0,h)}}break;case 38:case 40:t.preventDefault();var m=40===t.keyCode?1:-1;n.daysContainer&&void 0!==a.$i||a===n.input||a===n.altInput?t.ctrlKey?(t.stopPropagation(),T(n.currentYear-m),b(y(1),0)):u||b(void 0,7*m):a===n.currentYearElement?T(n.currentYear-m):n.config.enableTime&&(!u&&n.hourElement&&n.hourElement.focus(),r(t),n._debouncedChange());break;case 9:if(u){var g=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((function(e){return e})),p=g.indexOf(a);if(-1!==p){var v=g[p+(t.shiftKey?-1:1)];t.preventDefault(),(v||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(a)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&a===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],s(),Q();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],s(),Q()}(o||_(a))&&V("onKeyDown",t)}function O(e,t){if(void 0===t&&(t="flatpickr-day"),1===n.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var i=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),a=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),o=Math.min(i,n.selectedDates[0].getTime()),r=Math.max(i,n.selectedDates[0].getTime()),s=!1,c=0,l=0,d=o;d<r;d+=864e5)F(new Date(d),!0)||(s=s||d>o&&d<r,d<a&&(!c||d>c)?c=d:d>a&&(!l||d<l)&&(l=d));Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+t)).forEach((function(t){var o,r,d,u=t.dateObj.getTime(),f=c>0&&u<c||l>0&&u>l;if(f)return t.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){t.classList.remove(e)}));s&&!f||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){t.classList.remove(e)})),void 0!==e&&(e.classList.add(i<=n.selectedDates[0].getTime()?"startRange":"endRange"),a<i&&u===a?t.classList.add("startRange"):a>i&&u===a&&t.classList.add("endRange"),u>=c&&(0===l||u<=l)&&(r=a,d=i,(o=u)>Math.min(r,d)&&o<Math.max(r,d))&&t.classList.add("inRange")))}))}}function N(){!n.isOpen||n.config.static||n.config.inline||q()}function j(e){return function(t){var i=n.config["_"+e+"Date"]=n.parseDate(t,n.config.dateFormat),a=n.config["_"+("min"===e?"max":"min")+"Date"];void 0!==i&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((function(e){return F(e)})),n.selectedDates.length||"min"!==e||c(i),Q()),n.daysContainer&&($(),void 0!==i?n.currentYearElement[e]=i.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!a&&void 0!==i&&a.getFullYear()===i.getFullYear())}}function H(){return n.config.wrap?e.querySelector("[data-input]"):e}function Y(){"object"!=typeof n.config.locale&&void 0===kn.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=En(En({},kn.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?kn.l10ns[n.config.locale]:void 0),pn.D="("+n.l10n.weekdays.shorthand.join("|")+")",pn.l="("+n.l10n.weekdays.longhand.join("|")+")",pn.M="("+n.l10n.months.shorthand.join("|")+")",pn.F="("+n.l10n.months.longhand.join("|")+")",pn.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")",void 0===En(En({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===kn.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=yn(n),n.parseDate=bn({config:n.config,l10n:n.l10n})}function q(e){if("function"!=typeof n.config.position){if(void 0!==n.calendarContainer){V("onPreCalendarPosition");var t=e||n._positionElement,i=Array.prototype.reduce.call(n.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),a=n.calendarContainer.offsetWidth,o=n.config.position.split(" "),r=o[0],s=o.length>1?o[1]:null,c=t.getBoundingClientRect(),l=window.innerHeight-c.bottom,d="above"===r||"below"!==r&&l<i&&c.top>i,u=window.pageYOffset+c.top+(d?-i-2:t.offsetHeight+2);if(sn(n.calendarContainer,"arrowTop",!d),sn(n.calendarContainer,"arrowBottom",d),!n.config.inline){var f=window.pageXOffset+c.left,h=!1,m=!1;"center"===s?(f-=(a-c.width)/2,h=!0):"right"===s&&(f-=a-c.width,m=!0),sn(n.calendarContainer,"arrowLeft",!h&&!m),sn(n.calendarContainer,"arrowCenter",h),sn(n.calendarContainer,"arrowRight",m);var g=window.document.body.offsetWidth-(window.pageXOffset+c.right),p=f+a>window.document.body.offsetWidth,v=g+a>window.document.body.offsetWidth;if(sn(n.calendarContainer,"rightMost",p),!n.config.static)if(n.calendarContainer.style.top=u+"px",p)if(v){var y=function(){for(var e=null,t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];if(n.cssRules){try{n.cssRules}catch(e){continue}e=n;break}}return null!=e?e:function(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===y)return;var b=window.document.body.offsetWidth,w=Math.max(0,b/2-a/2),C=y.cssRules.length,D="{left:"+c.left+"px;right:auto;}";sn(n.calendarContainer,"rightMost",!1),sn(n.calendarContainer,"centerMost",!0),y.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+D,C),n.calendarContainer.style.left=w+"px",n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=g+"px";else n.calendarContainer.style.left=f+"px",n.calendarContainer.style.right="auto"}}}else n.config.position(n,e)}function $(){n.config.noCalendar||n.isMobile||(D(),X(),C())}function B(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function R(e){e.preventDefault(),e.stopPropagation();var t=dn(fn(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==t){var i=t,a=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=(a.getMonth()<n.currentMonth||a.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[a];else if("multiple"===n.config.mode){var r=J(a);r?n.selectedDates.splice(parseInt(r),1):n.selectedDates.push(a)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=a,n.selectedDates.push(a),0!==wn(a,n.selectedDates[0],!0)&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(s(),o){var c=n.currentYear!==a.getFullYear();n.currentYear=a.getFullYear(),n.currentMonth=a.getMonth(),c&&(V("onYearChange"),D()),V("onMonthChange")}if(X(),C(),Q(),o||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():v(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){var l="single"===n.config.mode&&!n.config.enableTime,d="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(l||d)&&B()}f()}}n.parseDate=bn({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=u,n._setHoursFromDate=c,n._positionCalendar=q,n.changeMonth=k,n.changeYear=T,n.clear=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!0),n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){var i=Dn(n.config);l(i.hours,i.minutes,i.seconds)}n.redraw(),e&&V("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),V("onClose")},n.onMouseOver=O,n._createElement=cn,n.createDay=p,n.destroy=function(){void 0!==n.config&&V("onDestroy");for(var e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var t=n.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete n[e]}catch(e){}}))},n.isEnabled=F,n.jumpToDate=h,n.updateValue=Q,n.open=function(e,t){if(void 0===t&&(t=n._positionElement),!0===n.isMobile){if(e){e.preventDefault();var i=fn(e);i&&i.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void V("onOpen")}if(!n._input.disabled&&!n.config.inline){var a=n.isOpen;n.isOpen=!0,a||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),V("onOpen"),q(t)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return n.hourElement.select()}),50))}},n.redraw=$,n.set=function(e,t){if(null!==e&&"object"==typeof e)for(var i in Object.assign(n.config,e),e)void 0!==G[i]&&G[i].forEach((function(e){return e()}));else n.config[e]=t,void 0!==G[e]?G[e].forEach((function(e){return e()})):Zt.indexOf(e)>-1&&(n.config[e]=rn(t));n.redraw(),Q(!0)},n.setDate=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=n.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);z(e,i),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),h(void 0,t),c(),0===n.selectedDates.length&&n.clear(!1),Q(t),t&&V("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};var G={locale:[Y,S],showMonths:[x,o,M],minDate:[h],maxDate:[h],positionElement:[U],clickOpens:[function(){!0===n.config.clickOpens?(u(n._input,"focus",n.open),u(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function z(e,t){var i=[];if(e instanceof Array)i=e.map((function(e){return n.parseDate(e,t)}));else if(e instanceof Date||"number"==typeof e)i=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":i=[n.parseDate(e,t)];break;case"multiple":i=e.split(n.config.conjunction).map((function(e){return n.parseDate(e,t)}));break;case"range":i=e.split(n.l10n.rangeSeparator).map((function(e){return n.parseDate(e,t)}))}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));n.selectedDates=n.config.allowInvalidPreload?i:i.filter((function(e){return e instanceof Date&&F(e,!1)})),"range"===n.config.mode&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function W(e){return e.slice().map((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function U(){n._positionElement=n.config.positionElement||n._input}function V(e,t){if(void 0!==n.config){var i=n.config[e];if(void 0!==i&&i.length>0)for(var a=0;i[a]&&a<i.length;a++)i[a](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(K("change")),n.input.dispatchEvent(K("input")))}}function K(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function J(e){for(var t=0;t<n.selectedDates.length;t++){var i=n.selectedDates[t];if(i instanceof Date&&0===wn(i,e))return""+t}return!1}function X(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((function(e,t){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=mn(i.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=i.getMonth().toString(),e.value=i.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function Z(e){var t=e||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map((function(e){return n.formatDate(e,t)})).filter((function(e,t,i){return"range"!==n.config.mode||n.config.enableTime||i.indexOf(e)===t})).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function Q(e){void 0===e&&(e=!0),void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=Z(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=Z(n.config.altFormat)),!1!==e&&V("onValueUpdate")}function ee(e){var t=fn(e),i=n.prevMonthNav.contains(t),a=n.nextMonthNav.contains(t);i||a?k(i?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){var i=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=En(En({},JSON.parse(JSON.stringify(e.dataset||{}))),t),r={};n.config.parseDate=o.parseDate,n.config.formatDate=o.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(e){n.config._enable=W(e)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(e){n.config._disable=W(e)}});var s="time"===o.mode;if(!o.dateFormat&&(o.enableTime||s)){var c=kn.defaultConfig.dateFormat||Qt.dateFormat;r.dateFormat=o.noCalendar||s?"H:i"+(o.enableSeconds?":S":""):c+" H:i"+(o.enableSeconds?":S":"")}if(o.altInput&&(o.enableTime||s)&&!o.altFormat){var l=kn.defaultConfig.altFormat||Qt.altFormat;r.altFormat=o.noCalendar||s?"h:i"+(o.enableSeconds?":S K":" K"):l+" h:i"+(o.enableSeconds?":S":"")+" K"}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:j("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:j("max")});var d=function(e){return function(t){n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:d("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:d("max")}),"time"===o.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,r,o);for(var u=0;u<i.length;u++)n.config[i[u]]=!0===n.config[i[u]]||"true"===n.config[i[u]];for(Zt.filter((function(e){return void 0!==n.config[e]})).forEach((function(e){n.config[e]=rn(n.config[e]||[]).map(a)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=0;u<n.config.plugins.length;u++){var f=n.config.plugins[u](n)||{};for(var h in f)Zt.indexOf(h)>-1?n.config[h]=rn(f[h]).map(a).concat(n.config[h]):void 0===o[h]&&(n.config[h]=f[h])}o.altInputClass||(n.config.altInputClass=H().className+" "+n.config.altInputClass),V("onParseConfig")}(),Y(),n.input=H(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=cn(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),U()):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&z(e,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=n.currentMonth),void 0===t&&(t=n.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]}},n.isMobile||function(){var e=window.document.createDocumentFragment();if(n.calendarContainer=cn("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=cn("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=cn("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=cn("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,x(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(e){n.__hidePrevMonthArrow!==e&&(sn(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(e){n.__hideNextMonthArrow!==e&&(sn(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],X(),n.monthNav)),n.innerContainer=cn("div","flatpickr-innerContainer"),n.config.weekNumbers){var t=function(){n.calendarContainer.classList.add("hasWeeks");var e=cn("div","flatpickr-weekwrapper");e.appendChild(cn("span","flatpickr-weekday",n.l10n.weekAbbreviation));var t=cn("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),i=t.weekWrapper,a=t.weekNumbers;n.innerContainer.appendChild(i),n.weekNumbers=a,n.weekWrapper=i}n.rContainer=cn("div","flatpickr-rContainer"),n.rContainer.appendChild(M()),n.daysContainer||(n.daysContainer=cn("div","flatpickr-days"),n.daysContainer.tabIndex=-1),C(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var e=Dn(n.config);n.timeContainer=cn("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var t=cn("span","flatpickr-time-separator",":"),i=un("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=i.getElementsByTagName("input")[0];var a=un("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=a.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=nn(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=nn(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(i),n.timeContainer.appendChild(t),n.timeContainer.appendChild(a),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var o=un("flatpickr-second");n.secondElement=o.getElementsByTagName("input")[0],n.secondElement.value=nn(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(cn("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(o)}return n.config.time_24hr||(n.amPM=cn("span","flatpickr-am-pm",n.l10n.amPM[an((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),sn(n.calendarContainer,"rangeMode","range"===n.config.mode),sn(n.calendarContainer,"animate",!0===n.config.animate),sn(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);var o=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!o&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var r=cn("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(r,n.element),r.appendChild(n.element),n.altInput&&r.appendChild(n.altInput),r.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+e+"]"),(function(t){return u(t,"click",n[e])}))})),n.isMobile)!function(){var e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=cn("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}u(n.mobileInput,"change",(function(e){n.setDate(fn(e).value,!1,n.mobileFormatStr),V("onChange"),V("onClose")}))}();else{var e=on(N,50);if(n._debouncedChange=on(f,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&u(n.daysContainer,"mouseover",(function(e){"range"===n.config.mode&&O(fn(e))})),u(n._input,"keydown",I),void 0!==n.calendarContainer&&u(n.calendarContainer,"keydown",I),n.config.inline||n.config.static||u(window,"resize",e),void 0!==window.ontouchstart?u(window.document,"touchstart",L):u(window.document,"mousedown",L),u(window.document,"focus",L,{capture:!0}),!0===n.config.clickOpens&&(u(n._input,"focus",n.open),u(n._input,"click",n.open)),void 0!==n.daysContainer&&(u(n.monthNav,"click",ee),u(n.monthNav,["keyup","increment"],d),u(n.daysContainer,"click",R)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){u(n.timeContainer,["increment"],r),u(n.timeContainer,"blur",r,{capture:!0}),u(n.timeContainer,"click",m),u([n.hourElement,n.minuteElement],["focus","click"],(function(e){return fn(e).select()})),void 0!==n.secondElement&&u(n.secondElement,"focus",(function(){return n.secondElement&&n.secondElement.select()})),void 0!==n.amPM&&u(n.amPM,"click",(function(e){r(e)}))}n.config.allowInput&&u(n._input,"blur",P)}}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&c(n.config.noCalendar?n.latestSelectedDateObj:void 0),Q(!1)),o();var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&i&&q(),V("onReady")}(),n}function Sn(e,t){for(var n=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),i=[],a=0;a<n.length;a++){var o=n[a];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Mn(o,t||{}),i.push(o._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Sn(this,e)},HTMLElement.prototype.flatpickr=function(e){return Sn([this],e)});var kn=function(e,t){return"string"==typeof e?Sn(window.document.querySelectorAll(e),t):e instanceof Node?Sn([e],t):Sn(e,t)};kn.defaultConfig={},kn.l10ns={en:En({},tn),default:En({},tn)},kn.localize=function(e){kn.l10ns.default=En(En({},kn.l10ns.default),e)},kn.setDefaults=function(e){kn.defaultConfig=En(En({},kn.defaultConfig),e)},kn.parseDate=bn({}),kn.formatDate=yn({}),kn.compareDates=wn,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return Sn(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=kn);const Ln=kn;new class{constructor(){this.menu=document.querySelector(".site-header__menu"),this.openButton=document.querySelector(".site-header__menu-trigger"),this.body=document.body,this.events()}events(){this.openButton.addEventListener("click",(()=>this.openMenu()))}openMenu(){this.openButton.classList.toggle("fa-bars"),this.openButton.classList.toggle("fa-xmark"),this.menu.classList.toggle("site-header__menu--active"),this.body.classList.toggle("body--blurred")}},new class{constructor(){document.querySelector(".hero-slider")&&new Vt(".hero-slider",{type:"loop",perPage:1,autoplay:!0,interval:4e3,speed:1e3,pauseOnHover:!0,pagination:!0,arrows:!0,classes:{pagination:"splide__pagination hero-slider__bullets",page:"splide__pagination__page hero-slider__bullet"}}).mount()}},new class{constructor(){window.openStreetMap=this,this.currentMap=null,this.routingControl=null,this.markerIcons={aetheric_spire:L.icon({iconUrl:`${mythguardData.theme_url}/images/markers/aetheric-spire.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),twinspire_hall:L.icon({iconUrl:`${mythguardData.theme_url}/images/markers/twinspire-hall.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),ironroot_bastion:L.icon({iconUrl:`${mythguardData.theme_url}/images/markers/ironroot-bastion.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},document.querySelectorAll(".acf-map").forEach((e=>{this.new_map(e)}))}new_map(e){const t=e.querySelectorAll(".marker");this.currentMap=L.map(e).setView([0,0],16),L.tileLayer("https://tile.jawg.io/jawg-terrain/{z}/{x}/{y}{r}.png?access-token=rqimrYpFF2sqiWjuVYjMWOYOorJOwWhEgSbPodxG5B9CPbu7DVjFk3GfOFZzXAmL",{attribution:'<a href="https://www.jawg.io" target="_blank">&copy; Jawg</a> - <a href="https://www.openstreetmap.org" target="_blank">&copy; OpenStreetMap</a>',maxZoom:22,subdomains:"abcd"}).addTo(this.currentMap);const n=[];t.forEach((e=>{this.add_marker(e,this.currentMap,n)})),n.length&&this.currentMap.fitBounds(n,{padding:[50,50],maxZoom:13})}add_marker(e,t,n){const i=parseFloat(e.getAttribute("data-lat")),a=parseFloat(e.getAttribute("data-lng")),o=[i,a],r=e.getAttribute("data-type"),s=this.create_icon(r),c=L.marker(o,{icon:s}).addTo(t),l=e.querySelector(".tooltip__content")?.innerHTML;l&&(c.bindTooltip(l,{direction:"right",offset:L.point(20,0),className:"location-tooltip"}),c.on("popupopen",(()=>{c.unbindTooltip()})),c.on("popupclose",(()=>{c.bindTooltip(l,{direction:"right",offset:L.point(20,0),className:"location-tooltip"})})));const d=e.querySelector(".marker__content")?.innerHTML,u=`\n      <div class="map-popup-content">\n        ${d||""}\n        <div class="directions-form">\n          <input type="text" id="start-address" placeholder="Enter your starting point">\n          <div class="button-group">\n            <button onclick="window.openStreetMap.getDirectionsFromAddress(${i}, ${a})" class="get-directions">Get Directions</button>\n            <button onclick="window.openStreetMap.getDirectionsFromCurrentLocation(${i}, ${a})" class="use-current-location">Use Current Location</button>\n          </div>\n        </div>\n      </div>\n    `;c.bindPopup(u),n.push(o)}create_icon(e){return this.markerIcons[e]||L.icon({iconUrl:`${mythguardData.theme_url}/images/markers/default.png`,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]})}getDirectionsFromCurrentLocation(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((n=>{this.showRoute(n.coords.latitude,n.coords.longitude,e,t)}),(e=>{console.error("Error getting location:",e),alert("Could not get your location. Please enable location services.")})):alert("Geolocation is not supported by your browser.")}getDirectionsFromAddress(e,t){const n=document.getElementById("start-address").value;n?L.Control.Geocoder.nominatim().geocode(n,(n=>{if(n&&n.length>0){const{lat:i,lng:a}=n[0].center;this.showRoute(i,a,e,t)}else alert("Could not find the address. Please try a different one.")})):alert("Please enter a starting address")}showRoute(e,t,n,i){this.currentMap.closePopup(),this.routingControl&&(this.routingControl.remove(),this.routingControl=null),this.routingControl=L.Routing.control({waypoints:[L.latLng(e,t),L.latLng(n,i)],router:L.Routing.osrmv1({serviceUrl:"https://router.project-osrm.org/route/v1"}),routeWhileDragging:!0,lineOptions:{styles:[{color:"#1B365D",weight:4}]},show:!0,collapsible:!0,showAlternatives:!1,altLineOptions:{styles:[{color:"#6FA1EC",opacity:.8,weight:3}]},createMarker:(e,t)=>{if(0===e){const e=new L.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});return L.marker(t.latLng,{icon:e})}return null},formatter:new L.Routing.Formatter({units:"imperial",roundingSensitivity:30})}).addTo(this.currentMap),this.currentMap.getContainer().closest(".acf-map").classList.add("show-directions");const a=new MutationObserver((()=>{const e=document.querySelector(".leaflet-routing-collapse-btn");e&&(e.addEventListener("click",(()=>{this.closeDirections()})),a.disconnect())}));a.observe(document.body,{childList:!0,subtree:!0}),setTimeout((()=>this.currentMap.invalidateSize()),100)}closeDirections(){this.routingControl&&(this.routingControl.remove(),this.routingControl=null),this.currentMap.getContainer().closest(".acf-map").classList.remove("show-directions"),setTimeout((()=>this.currentMap.invalidateSize()),100);const e=[];document.querySelectorAll(".marker").forEach((t=>{const n=parseFloat(t.getAttribute("data-lat")),i=parseFloat(t.getAttribute("data-lng"));n&&i&&e.push([n,i])})),e.length&&this.currentMap.fitBounds(e)}},new class{constructor(){this.currentView="calendar",this.init()}init(){this.trigger=document.querySelector(".calendar-widget__trigger"),this.content=document.querySelector(".calendar-widget__content"),this.calendarView=document.querySelector(".calendar-view"),this.listView=document.querySelector(".calendar-list-view"),this.calendar=document.querySelector("#mythguard-calendar"),this.calendarBtn=document.querySelector(".view-toggle__btn--calendar"),this.listBtn=document.querySelector(".view-toggle__btn--list"),this.trigger&&this.content&&this.calendar&&(this.dates={contracts:[],gatherings:[]},this.content.querySelectorAll(".calendar-list-view__header .fas.fa-caret-up").forEach((e=>{e.addEventListener("click",(()=>this.toggleSection(e)))})),this.flatpickr=flatpickr(this.calendar,this.getFlatpickrConfig()),this.trigger.addEventListener("click",(()=>this.toggleCalendar())),document.addEventListener("click",(e=>this.handleClickOutside(e))),this.calendarBtn.addEventListener("click",(()=>this.switchView("calendar"))),this.listBtn.addEventListener("click",(()=>this.switchView("list"))),this.fetchDates())}getFlatpickrConfig(){return{inline:!0,dateFormat:"Y-m-d",defaultDate:new Date,onChange:(e,t)=>this.handleDateSelect(t),onDayCreate:(e,__,t,n)=>{const i=t.formatDate(n.dateObj,"Y-m-d"),a=this.getEventsForDate(i);a.length>0&&(a.forEach((e=>{n.classList.add(`has-${e.type}`),"contract"===e.type&&(e.isStart&&n.classList.add("contract-start"),e.isEnd&&n.classList.add("contract-end"));const t=document.createElement("span");"contract"===e.type?t.className="event-dot "+(e.isStart?"contract-start-dot":"contract-end-dot"):t.className=`event-dot ${e.type}-dot`,n.appendChild(t)})),a.length>1&&n.classList.add("has-multiple"))}}}async fetchDates(){try{const e=await wp.apiFetch({path:"/mythguard/v1/calendar"});this.dates=e,this.updateCalendarDates()}catch(e){}}getEventsForDate(e){return[...this.dates.contracts.filter((t=>t.date===e)).map((e=>({...e,type:"contract"}))),...this.dates.gatherings.filter((t=>t.date===e)).map((e=>({...e,type:"gathering"})))]}updateCalendarDates(){if(!this.dates||!this.flatpickr)return;this.updateListView();const e=this.flatpickr.currentMonth,t=this.flatpickr.currentYear;this.flatpickr&&"function"==typeof this.flatpickr.destroy&&this.flatpickr.destroy(),this.flatpickr=flatpickr(this.calendar,this.getFlatpickrConfig(new Date(t,e)))}handleDateSelect(e){const t=this.content.querySelector(".calendar-events");t&&t.remove();const n=[...this.dates.contracts.filter((t=>t.date===e)).map((e=>({...e,type:"contract"}))),...this.dates.gatherings.filter((t=>t.date===e)).map((e=>({...e,type:"gathering"})))];if(n.length>0){const e=n.map((e=>`\n                <a href="${e.url}" class="calendar-event calendar-event--${e.type}${e.isStart?"-start":e.isEnd?"-end":""}">\n                    <span class="calendar-event__type">${e.type}</span>\n                    <span class="calendar-event__title ${e.isStart?"start":e.isEnd?"end":""}">${e.title}</span>\n                </a>\n            `)).join(""),t=this.content.querySelector(".calendar-legend");t?t.insertAdjacentHTML("afterend",`<div class="calendar-events">${e}</div>`):console.error("Could not find .calendar-legend element")}}toggleCalendar(){const e="none"===this.content.style.display;this.content.style.display=e?"block":"none",e&&this.fetchDates()}handleClickOutside(e){this.content.contains(e.target)||this.trigger.contains(e.target)||"none"===this.content.style.display||(this.content.style.display="none")}switchView(e){this.currentView=e,this.calendarBtn.classList.toggle("active","calendar"===e),this.listBtn.classList.toggle("active","list"===e),this.calendarView.classList.toggle("active","calendar"===e),this.listView.classList.toggle("active","list"===e),"list"===e&&this.updateListView()}toggleSection(e){const t=e.closest("div"),n=t.querySelector(".calendar-list-view__items");e.classList.toggle("collapsed"),e.classList.toggle("fa-caret-up"),e.classList.toggle("fa-caret-down"),n.classList.toggle("collapsed");const i=t.classList[0],a=e.classList.contains("collapsed");localStorage.setItem(`${i}-collapsed`,a)}restoreCollapsedState(){["calendar-list-view__contracts","calendar-list-view__gatherings"].forEach((e=>{if("true"===localStorage.getItem(`${e}-collapsed`)){const t=this.content.querySelector(`.${e}`),n=t.querySelector(".calendar-list-view__header"),i=t.querySelector(".calendar-list-view__items");n.classList.add("collapsed"),i.classList.add("collapsed"),t.classList.add("collapsed")}}))}formatDate(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`}updateListView(){if(!this.listView)return;const e=this.listView.querySelector(".calendar-list-view__contracts .calendar-list-view__items");if(e){e.innerHTML="";const t=this.dates.contracts.reduce(((e,t)=>(e[t.url]||(e[t.url]={title:t.title,url:t.url,start:null,end:null}),t.isStart&&(e[t.url].start=t.date),t.isEnd&&(e[t.url].end=t.date),e)),{});Object.values(t).forEach((t=>{if(t.start&&t.end){const n=document.createElement("li"),i=document.createElement("a");i.href=t.url,i.className="calendar-list-item",i.innerHTML=`\n                    <div class="calendar-list-item__date">\n                        <span>${this.formatDate(t.start)}</span>\n                        <span>${this.formatDate(t.end)}</span>\n                    </div>\n                    <span class="calendar-list-item__title">${t.title}</span>\n                    `,n.appendChild(i),e.appendChild(n)}}))}const t=this.listView.querySelector(".calendar-list-view__gatherings .calendar-list-view__items");t&&(t.innerHTML="",this.dates.gatherings.forEach((e=>{const n=document.createElement("li"),i=document.createElement("a");i.href=e.url,i.className="calendar-list-item",i.innerHTML=`\n                    <span class="calendar-list-item__date">${this.formatDate(e.date)}</span>\n                    <span class="calendar-list-item__title">${e.title}</span>\n                `,n.appendChild(i),t.appendChild(n)})))}},new class{constructor(){this.initializeProperties(),this.injectHtml(),this.initializeElements(),this.bindEvents()}initializeProperties(){this.isOverlayOpen=!1,this.typingTimer=null,this.isSpinnerVisible=!1}initializeElements(){this.searchTriggers=document.querySelectorAll(".js-search-trigger"),this.searchOverlay=document.querySelector(".search-overlay"),this.closeButton=document.querySelector(".search-overlay__close"),this.searchInput=document.querySelector(".search-term"),this.searchResults=document.querySelector(".search-overlay__results")}bindEvents(){this.searchTriggers.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.openOverlay()}))})),this.closeButton&&this.closeButton.addEventListener("click",(()=>this.closeOverlay())),document.addEventListener("keyup",(e=>this.handleKeyPress(e))),this.searchInput.addEventListener("input",(()=>this.handleSearchInput()))}handleKeyPress(e){const t=this.isUserTypingInField();"s"!==e.key||this.isOverlayOpen||t||this.openOverlay(),"Escape"===e.key&&this.isOverlayOpen&&this.closeOverlay()}isUserTypingInField(){return["INPUT","TEXTAREA"].includes(document.activeElement.tagName)||document.activeElement.hasAttribute("contenteditable")}handleSearchInput(){clearTimeout(this.typingTimer),this.searchInput.value?(this.showLoadingSpinner(),this.scheduleSearch()):this.clearSearchResults()}injectHtml(){document.body.insertAdjacentHTML("beforeend",'\n      <div class="search-overlay">\n        <div class="search-overlay__top">\n          <div class="container search-overlay__top-inner">\n            <i class="fa-solid fa-magnifying-glass search-overlay__icon" aria-hidden="true"></i>\n            <input type="text" class="search-term" placeholder="What do you seek?" id="search-term">\n            <i class="fa-solid fa-square-xmark search-overlay__close" aria-hidden="true"></i>\n          </div>\n        </div>\n        <div class="container">\n          <div class="search-overlay__results"></div>\n        </div>\n      </div>\n    ')}openOverlay(){this.searchOverlay.classList.add("search-overlay--active"),document.body.classList.add("body-no-scroll"),this.isOverlayOpen=!0,setTimeout((()=>this.searchInput.focus()),300)}closeOverlay(){this.searchOverlay.classList.remove("search-overlay--active"),document.body.classList.remove("body-no-scroll"),this.isOverlayOpen=!1,this.searchInput.value="",this.clearSearchResults()}showLoadingSpinner(){this.isSpinnerVisible||(this.searchResults.innerHTML=Jt.render(),this.isSpinnerVisible=!0)}clearSearchResults(){this.searchResults.innerHTML="",this.isSpinnerVisible=!1}scheduleSearch(){this.typingTimer=setTimeout((()=>this.getResults()),750)}async getResults(){try{const e=await wp.apiFetch({path:`/mythguard/v1/search?term=${this.searchInput.value}`});this.renderSearchResults(e)}catch(e){console.error("Search error:",e),this.handleSearchError()}}handleSearchError(){this.searchResults.innerHTML="<p>Unexpected error. Please try again.</p>",this.isSpinnerVisible=!1}getEventTypeHtml(e){return`\n    ${e.map((e=>`\n        <div class="gathering-summary">\n          <a class="gathering-summary__date t-center" href=" ${e.permalink}">\n        <span class="gathering-summary__month">${e.month}</span>\n        <span class="gathering-summary__day">\n           ${e.day}\n        </span>\n    </a>\n    <div class="gathering-summary__content">\n        <h5 class="gathering-summary__title headline headline--tiny"><a href="${e.permalink}">${e.title}</a></h5>\n        <p>${e.description} <a href="${e.permalink}" class="nu gray">Learn more</a></p>\n            </div>\n        </div>`)).join("")}`}getGuardianTypeHtml(e){return`\n    <ul class="guardian-cards">\n      ${e.map((e=>`\n        <li class="guardian-card__list-item">\n                    <a class="guardian-card" href="${e.permalink}">\n                        <img class="guardian-card__image" src="${e.image}">\n                        <span class="guardian-card__name">${e.title}</span>\n                    </a>\n                </li>\n      `)).join("")}\n    </ul>`}getGenericTypeHtml(e){return`\n      <ul class="link-list min-list">\n        ${e.map((e=>{const t="post"==e.postType?` <small>by ${e.authorName}</small>`:"";return`<li><a href="${e.permalink}">${e.title}</a>${t}</li>`})).join("")}\n      </ul>\n    `}renderSearchResults(e){this.isSpinnerVisible=!1;const{generalInfo:t,guardians:n,programs:i,locations:a,gatherings:o}=e;t.length||n.length||i.length||a.length||o.length?this.searchResults.innerHTML=`\n      <div class='row'>\n        <div class="one-third">\n          <h2 class="search-overlay__section-title">General Information</h2>\n          ${t.length?this.getGenericTypeHtml(t):""}\n        </div>\n        <div class="one-third">\n          <h2 class="search-overlay__section-title">Programs</h2>\n          ${i.length?this.getGenericTypeHtml(i):""}\n          <h2 class="search-overlay__section-title">Guardians</h2>\n          ${n.length?this.getGuardianTypeHtml(n):""}\n        </div>\n        <div class="one-third">\n          <h2 class="search-overlay__section-title">Locations</h2>\n          ${a.length?this.getGenericTypeHtml(a):""}\n          <h2 class="search-overlay__section-title">Gatherings</h2>\n          ${o.length?this.getEventTypeHtml(o):""}\n        </div>\n      </div>\n    `:this.searchResults.innerHTML='<h2 class="search-overlay__section-title">No results found</h2>'}},new class{constructor(){this.init()}init(){this.addMobileLabels()}addMobileLabels(){document.querySelectorAll(".guardian-roster tbody tr").forEach((e=>{const t=["Guardian Type","Guardian Description"];e.querySelectorAll("td").forEach(((e,n)=>{e.setAttribute("data-label",t[n])}))}))}},new class{constructor(){this.bindEvents(),this.state=new Map,this.countElement=document.querySelector(".codex-count"),this.updateCodexCount()}bindEvents(){document.addEventListener("click",(e=>{const t=e.target.closest(".delete-codex");t&&this.handleDeleteCodex(t)})),document.addEventListener("click",(e=>{const t=e.target.closest(".edit-codex");t&&this.handleUpdateCodex(t)})),document.addEventListener("click",(e=>{const t=e.target.closest(".update-codex");t&&this.handleSubmitCodex(t)})),document.addEventListener("click",(e=>{const t=e.target.closest(".submit-codex");t&&this.handleAddCodex(t)}))}getCodexElements(e){const t=e.closest("li");return{codexItem:t,titleField:t.querySelector(".codex-title-field"),bodyField:t.querySelector(".codex-body-field"),updateButton:t.querySelector(".update-codex"),editButton:t.querySelector(".edit-codex"),codexId:t.getAttribute("data-id")}}getCodexState(e){return this.state.has(e)||this.state.set(e,{isEditing:!1,originalTitle:"",originalBody:"",currentTitle:"",currentBody:""}),this.state.get(e)}updateCodexCount(){this.countElement&&wp.apiFetch({path:"/wp/v2/codex?per_page=1"}).then((e=>{if(Array.isArray(e)&&e.length>0){const t=e[0].userCodexCount;this.countElement.textContent=`${t}/15`}else wp.apiFetch({path:"/mythguard/v1/codex-count"}).then((e=>{this.countElement.textContent=`${e.count}/15`}))})).catch((e=>{console.error("Error fetching count:",e)}))}updateCodexState(e,t){const n=this.getCodexState(e);this.state.set(e,{...n,...t})}async handleDeleteCodex(e){const{codexId:t,codexItem:n}=this.getCodexElements(e);if(await Xt.confirm("Are you sure you want to delete this codex?"))try{await wp.apiFetch({path:`/mythguard/v1/codex/${t}`,method:"DELETE"}),n.remove(),Xt.show("Codex deleted successfully","success"),this.updateCodexCount()}catch(e){e.code&&!e.code.includes("rest_")&&Xt.show(e.message.includes("not found")?"This codex entry no longer exists.":"Error deleting codex. Please try again.","error")}finally{this.isProcessingDelete=!1}else this.isProcessingDelete=!1}handleUpdateCodex(e){const{codexId:t}=this.getCodexElements(e);this.getCodexState(t).isEditing?this.makeNoteReadOnly(e,!0):this.makeNoteEditable(e)}makeNoteEditable(e){const{titleField:t,bodyField:n,updateButton:i,codexId:a}=this.getCodexElements(e);this.updateCodexState(a,{isEditing:!0,originalTitle:t.value,originalBody:n.value,currentTitle:t.value,currentBody:n.value}),t.removeAttribute("readonly"),n.removeAttribute("readonly"),t.classList.add("codex-active-field"),n.classList.add("codex-active-field"),i.classList.add("update-codex--visible"),e.textContent="Cancel"}makeNoteReadOnly(e,t=!1){const{titleField:n,bodyField:i,updateButton:a,codexId:o}=this.getCodexElements(e),r=this.getCodexState(o);t&&r.isEditing&&(n.value=r.originalTitle,i.value=r.originalBody),n.setAttribute("readonly",!0),i.setAttribute("readonly",!0),n.classList.remove("codex-active-field"),i.classList.remove("codex-active-field"),a.classList.remove("update-codex--visible"),e.textContent="Update",this.updateCodexState(o,{isEditing:!1})}async handleSubmitCodex(e){const{titleField:t,bodyField:n,codexId:i}=this.getCodexElements(e),a=this.getCodexState(i),o=t.value,r=n.value,s=o!==a.originalTitle||r!==a.originalBody;try{const t=await wp.apiFetch({path:`/mythguard/v1/codex/${i}`,method:"PUT",data:{title:o,body:r,status:"publish"}});if(!t||t.error)throw new Error(t?.error?.message||"Failed to update codex");const{editButton:n}=this.getCodexElements(e);this.makeNoteReadOnly(n),s&&Xt.show("Codex updated successfully","success")}catch(e){console.error("Update error:",e),Xt.show("Error updating codex. Please try again.","error")}}async handleAddCodex(){const e=document.querySelector(".new-codex-title").value,t=document.querySelector(".new-codex-body").value;if(e&&t)try{const n=await wp.apiFetch({path:"/mythguard/v1/codex",method:"POST",data:{title:e,body:t,status:"publish"}});if(!n||n.error){const e=n?.error?.message||"Failed to add codex";return void Xt.show(e,"error")}this.insertNewCodexItem(n),Xt.show("Codex added successfully","success"),this.hideCreateForm(),this.updateCodexCount()}catch(e){console.error("Add error:",e),e.data&&e.data.message?Xt.show(e.data.message,"error"):Xt.show("Error adding codex. Please try again.","error")}else Xt.show("Please fill in both fields","error")}clearNewCodexFields(){document.querySelector(".new-codex-title").value="",document.querySelector(".new-codex-body").value=""}showCreateForm(){const e=document.querySelector(".create-codex-form"),t=document.querySelector(".add-codex");e.classList.add("is-visible"),t.classList.add("is-hidden")}hideCreateForm(){const e=document.querySelector(".create-codex-form"),t=document.querySelector(".add-codex");e.classList.remove("is-visible"),t.classList.remove("is-hidden"),this.clearNewCodexFields()}insertNewCodexItem(e){const t=document.getElementById("codex"),n=document.createElement("div");n.innerHTML=`\n            <li class="codex-item" data-id="${e.id}">\n                <div class="codex-title-wrapper">\n                    <input class="codex-title-field" value="${e.title}" readonly>\n                    <div class="codex-actions">\n                        <button class="edit-codex btn btn--small btn--yellow">Update</button>\n                        <button class="delete-codex btn btn--small btn--dark-orange">Delete</button>\n                    </div>\n                </div>\n                <textarea class="codex-body-field" readonly>${e.body}</textarea>\n                <button class="update-codex btn btn--small btn--blue">Save</button>\n            </li>\n    `.trim();const i=n.firstElementChild;t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}},new class{constructor(){this.bindEvents()}bindEvents(){document.addEventListener("click",(e=>{const t=e.target.closest(".like-box");t&&this.handleLikeGuardian(t)}))}async handleLikeGuardian(e){try{"yes"===e.dataset.exists?await this.deleteLike(e):await this.addLike(e)}catch(e){Xt.show("Error processing like action","error"),console.error("Like error:",e)}}async deleteLike(e){const t=e.dataset.like;if(!(await fetch(`${mythguardData.root_url}/wp-json/mythguard/v1/manageLike`,{method:"DELETE",headers:{"X-WP-Nonce":mythguardData.nonce,"Content-Type":"application/json"},body:JSON.stringify({like:t})})).ok)throw new Error("Failed to unlike guardian");{e.dataset.exists="no";const t=e.querySelector(".like-count");t.textContent=parseInt(t.textContent)-1}}async addLike(e){const t=e.dataset.guardian,n=await fetch(`${mythguardData.root_url}/wp-json/mythguard/v1/manageLike`,{method:"POST",headers:{"X-WP-Nonce":mythguardData.nonce,"Content-Type":"application/json"},body:JSON.stringify({guardianId:t})});if(!n.ok)throw new Error("Failed to like guardian");{const t=await n.json();e.dataset.exists="yes",e.dataset.like=t;const i=e.querySelector(".like-count");i.textContent=parseInt(i.textContent)+1}}},new class{constructor(){this.initLightbox()}initLightbox(){document.addEventListener("click",(e=>{const t=e.target.closest(".guardian-image-link"),n=e.target.closest(".lightbox-trigger");if(t)e.preventDefault(),this.openLightbox(t.href);else if(n){e.preventDefault();const t=n.closest(".guardian-image").querySelector(".guardian-image-link");this.openLightbox(t.href)}}))}openLightbox(e){const t=document.createElement("div");t.className="mythguard-lightbox-overlay",t.innerHTML=`\n            <div class="mythguard-lightbox-container">\n                <button class="mythguard-lightbox-close" aria-label="Close"><i class="fa-solid fa-square-xmark" aria-hidden="true"></i></button>\n                <img src="${e}" alt="">\n            </div>\n        `,document.body.appendChild(t),document.body.style.overflow="hidden",setTimeout((()=>t.classList.add("is-open")),10);const n=()=>{t.classList.remove("is-open"),document.body.style.overflow="",setTimeout((()=>t.remove()),200)};t.addEventListener("click",(e=>{(e.target===t||e.target.classList.contains("mythguard-lightbox-close")||e.target.closest(".mythguard-lightbox-close"))&&n()})),document.addEventListener("keyup",(function e(t){"Escape"===t.key&&(n(),document.removeEventListener("keyup",e))}))}},new class{constructor(){this.isProcessing=!1,this.form=document.querySelector(".create-contract-form"),this.countElement=document.querySelector(".contract-count span"),this.adminCountElement=document.querySelector(".contract-count--admin span"),this.guardianSelect=document.querySelector(".new-contract-guardian"),this.programSelect=document.querySelector(".new-contract-program"),this.formGroups=document.querySelectorAll(".form-group"),this.revealButtons=document.querySelectorAll(".reveal-input-btn"),this.formInputs=document.querySelectorAll(".form-group.is-hidden input, .form-group.is-hidden textarea, .form-group.is-hidden select"),this.state=new Map,this.guardians=[],this.programs=[],this.bindEvents(),this.updateContractCount(),this.loadGuardians(),this.loadPrograms(),this.setupSelectListeners(),this.setupRevealFields(),this.setupDatePickers(),this.checkAutoEditMode()}setupSelectListeners(){this.guardianSelect&&this.guardianSelect.addEventListener("change",(()=>this.handleGuardianChange())),this.programSelect&&this.programSelect.addEventListener("change",(()=>this.handleProgramChange()))}setupDatePickers(){const e=document.querySelector(".new-contract-start-date"),t=document.querySelector(".new-contract-end-date"),n={enableTime:!0,allowInput:!0,altInput:!0,altFormat:"m/d/Y h:i K",dateFormat:"Y-m-d H:i:s",minDate:"today",time_24hr:!1,minuteIncrement:30,disableMobile:!0};e&&Ln(e,{...n,enableTime:!0,allowInput:!0,altInput:!0,altFormat:"m/d/Y h:i K",dateFormat:"Y-m-d H:i",minDate:"today",time_24hr:!1,minuteIncrement:30,defaultHour:9,placeholder:"Select start date...",onChange:t=>{if(t[0]){const n=document.querySelector(".new-contract-end-date")._flatpickr;n&&n.set("minDate",t[0]),e.dispatchEvent(new Event("change"))}}}),t&&Ln(t,{...n,defaultHour:17,placeholder:"Select end date...",onChange:e=>{e[0]&&t.dispatchEvent(new Event("change"))}})}setupRevealFields(){this.revealButtons.forEach((e=>{e.addEventListener("click",(t=>{const n=e.closest(".form-group");if(!n)return void console.error("No form group found for button:",e.textContent);n.classList.add("active"),n.classList.remove("is-hidden");const i=n.querySelector("input, textarea, select");i?i.focus():console.error("No input found in form group")}))})),this.formInputs.forEach((e=>{const t=()=>{if(e.value){const t=e.closest(".form-group");t&&(t.classList.add("active"),t.classList.remove("is-hidden"))}};e.addEventListener("input",t),e.addEventListener("change",t),e.value&&t()}))}handleGuardianChange(){const e=this.guardianSelect.value;if(!e)return void this.updateProgramOptions(this.programs);const t=this.guardians.find((t=>t.id.toString()===e)),n=t?.acf?.related_programs||[];if(n.length>0){const e=n.map((e=>"object"==typeof e?e.ID:e)),t=this.programs.filter((t=>e.includes(t.id)));this.updateProgramOptions(t)}else this.updateProgramOptions([])}handleProgramChange(){const e=this.programSelect.value;if(!e)return void this.updateGuardianOptions(this.guardians);const t=this.guardians.filter((t=>(t.acf?.related_programs||[]).some((t=>("object"==typeof t?t.ID:t)===parseInt(e)))));this.updateGuardianOptions(t)}updateProgramOptions(e,t=null){const n=t||this.programSelect;if(!n)return;const i=n.value;if(n.innerHTML="",n===this.programSelect){const e=document.createElement("option");e.value="",e.textContent="Select a program...",n.appendChild(e)}e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.title.rendered,n.appendChild(t)})),i&&(n.value=i)}updateGuardianOptions(e,t=null){const n=t||this.guardianSelect;if(!n)return;const i=n.value;if(n.innerHTML="",n===this.guardianSelect){const e=document.createElement("option");e.value="",e.textContent="Select a guardian...",n.appendChild(e)}e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.title.rendered,n.appendChild(t)})),i&&(n.value=i)}bindEvents(){document.addEventListener("click",(e=>{const t=e.target.closest("[data-action]");if(t)switch(e.preventDefault(),t.dataset.action){case"submit-contract":this.handleAddContract(t);break;case"cancel-contract":this.resetForm();break;case"edit-contract":this.handleEditContract(t);break;case"update-contract":this.handleUpdateContract(t);break;case"delete-contract":this.handleDeleteContract(t)}}))}getContractElements(e){const t=e.closest("li")||e.closest(".single-contract-item");return t?{contractItem:t,titleField:t.querySelector(".contract-title-field, .single-contract-title-field"),descriptionField:t.querySelector(".contract-description-field, .single-contract-description-field"),programField:t.querySelector(".contract-program-field, .single-contract-program-field"),guardianField:t.querySelector(".contract-guardian-field, .single-contract-guardian-field"),startDateField:t.querySelector(".contract-start-date, .single-contract-start-date"),endDateField:t.querySelector(".contract-end-date, .single-contract-end-date"),updateButton:t.querySelector('[data-action="update-contract"]'),editButton:t.querySelector('[data-action="edit-contract"]'),contractId:t.dataset.id}:null}getContractState(e){return this.state.has(e)||this.state.set(e,{isEditing:!1,originalTitle:"",originalDescription:"",originalProgram:"",originalGuardian:"",originalStartDate:"",originalEndDate:"",currentTitle:"",currentDescription:"",currentProgram:"",currentGuardian:"",currentStartDate:"",currentEndDate:""}),this.state.get(e)}async loadGuardians(){const e=await wp.apiFetch({path:"/wp/v2/guardian?per_page=100"});this.guardians=e,this.updateGuardianOptions(e)}async loadPrograms(){const e=await wp.apiFetch({path:"/wp/v2/program?per_page=100"});this.programs=e,this.updateProgramOptions(e)}toggleEditMode(e){const t=this.getContractState(e),n=this.getContractElements(document.querySelector(`[data-id="${e}"]`));if(t.isEditing)n.titleField.value=t.originalTitle,n.descriptionField.value=t.originalDescription,n.programField.value=t.originalProgram,n.guardianField.value=t.originalGuardian,n.startDateField.value=t.originalStartDate,n.endDateField.value=t.originalEndDate,n.titleField.setAttribute("readonly",!0),n.descriptionField.setAttribute("readonly",!0),n.programField.setAttribute("disabled",!0),n.guardianField.setAttribute("disabled",!0),n.startDateField.setAttribute("readonly",!0),n.endDateField.setAttribute("readonly",!0),n.startDateField._flatpickr&&n.startDateField._flatpickr.destroy(),n.startDateField.setAttribute("readonly",!0),n.endDateField._flatpickr&&n.endDateField._flatpickr.destroy(),n.endDateField.setAttribute("readonly",!0),n.updateButton&&(n.updateButton.style.display="none"),n.editButton&&(n.editButton.textContent="Edit",n.editButton.classList.remove("btn--orange"),n.editButton.classList.add("btn--blue")),n.updateButton.style.display="none",n.editButton.textContent="Edit";else{t.originalTitle=n.titleField.value,t.originalDescription=n.descriptionField.value,t.originalProgram=n.programField.value,t.originalGuardian=n.guardianField.value,t.originalStartDate=n.startDateField.value,t.originalEndDate=n.endDateField.value,n.titleField.removeAttribute("readonly"),n.descriptionField.removeAttribute("readonly"),n.programField.removeAttribute("disabled"),n.guardianField.removeAttribute("disabled"),n.startDateField.removeAttribute("readonly"),n.endDateField.removeAttribute("readonly"),this.updateProgramOptions(this.programs,n.programField),this.updateGuardianOptions(this.guardians,n.guardianField);const e=new Date;e.setHours(0,0,0,0);const i=n.startDateField.value,a=n.endDateField.value,o=Ln.parseDate(i,"m/d/Y h:i A"),r=Ln.parseDate(a,"m/d/Y h:i A"),s=(Ln(n.startDateField,{enableTime:!0,allowInput:!0,altInput:!0,altFormat:"m/d/Y h:i K",dateFormat:"Y-m-d H:i:s",time_24hr:!1,minuteIncrement:30,defaultDate:o,minDate:e,onChange:e=>{if(e[0]){const t=n.endDateField._flatpickr;t&&t.set("minDate",e[0])}}}),Math.max(o?.getTime()||e.getTime(),e.getTime()));Ln(n.endDateField,{enableTime:!0,allowInput:!0,altInput:!0,altFormat:"m/d/Y h:i K",dateFormat:"Y-m-d H:i:s",time_24hr:!1,minuteIncrement:30,defaultDate:r,minDate:new Date(s)}),n.updateButton&&(n.updateButton.style.display="inline-block"),n.editButton&&(n.editButton.textContent="Cancel",n.editButton.classList.remove("btn--blue"),n.editButton.classList.add("btn--orange"))}t.isEditing=!t.isEditing}resetForm(){this.form&&(this.form.reset(),this.formGroups.forEach((e=>{e.classList.remove("active"),e.classList.add("is-hidden")})))}async updateContractCount(){if(this.countElement)try{const e=await wp.apiFetch({path:"/mythguard/v1/contract-count"}),t=e.userCount,n=e.activeCount;this.countElement.textContent=e.isAdmin?`${n} active / ${t} total`:`${n}/5 active (${t} total)`,e.isAdmin&&this.adminCountElement?(this.adminCountElement.textContent=e.totalCount.toString(),this.adminCountElement.parentElement.style.display="grid"):this.adminCountElement&&(this.adminCountElement.parentElement.style.display="none");const i=document.querySelector(".add-contract");i&&(i.style.display=!e.isAdmin&&n>=5?"none":"inline-block")}catch(e){Xt.error("Failed to update contract count")}}async checkAutoEditMode(){if("true"===new URLSearchParams(window.location.search).get("edit")){await Promise.all([this.loadGuardians(),this.loadPrograms()]);const e=document.querySelector("[data-id]");e&&this.handleEditContract(e.querySelector('[data-action="edit-contract"]'))}}handleEditContract(e){const t=e.closest("[data-id]"),n=t.dataset.id,i=this.getContractState(n);t.classList.contains("expired-contract")?Xt.error("Cannot edit expired contracts"):(i.isEditing,this.toggleEditMode(n))}async handleAddContract(e){if(this.isProcessing)return;this.isProcessing=!0;const t=e.closest("form"),n=t.querySelector(".new-contract-title").value,i=t.querySelector(".new-contract-description").value,a=t.querySelector(".new-contract-program").value,o=t.querySelector(".new-contract-guardian").value,r=t.querySelector(".new-contract-start-date")._flatpickr,s=t.querySelector(".new-contract-end-date")._flatpickr;if(!r?.selectedDates[0]||!s?.selectedDates[0])return Xt.show("Please select both start and end dates","error"),void(this.isProcessing=!1);const c=r.formatDate(r.selectedDates[0],"Y-m-d H:i:s"),l=s.formatDate(s.selectedDates[0],"Y-m-d H:i:s");if(n&&a&&o)try{await wp.apiFetch({path:"/mythguard/v1/contracts",method:"POST",data:{title:n,content:i,meta:{related_program:a,related_guardian:o,contract_start:c,contract_end:l}}}),await this.updateContractCount(),this.resetForm(),Xt.show("Contract created successfully","success"),window.location.reload()}catch(e){console.error("Error creating contract:",e),Xt.show("Failed to create contract","error")}finally{this.isProcessing=!1}else Xt.show("Please fill in all required fields","error")}async handleUpdateContract(e){if(this.isProcessing)return;this.isProcessing=!0;const{contractId:t,titleField:n,descriptionField:i,programField:a,guardianField:o,startDateField:r,endDateField:s}=this.getContractElements(e);if(!t)return void Xt.show("Contract ID not found","error");const c=r._flatpickr,l=s._flatpickr;if(!c?.selectedDates[0]||!l?.selectedDates[0])return Xt.show("Please select both start and end dates","error"),void(this.isProcessing=!1);const d=c.formatDate(c.selectedDates[0],"Y-m-d H:i:s"),u=l.formatDate(l.selectedDates[0],"Y-m-d H:i:s");try{await wp.apiFetch({path:`/mythguard/v1/contracts/${t}`,method:"PUT",data:{title:n.value,content:i.value,meta:{related_program:a.value,related_guardian:o.value,contract_start:d,contract_end:u}}}),Xt.show("Contract updated successfully","success"),window.location.reload()}catch(e){let t="Failed to update contract";e.message?t+=`: ${e.message}`:navigator.onLine||(t="No internet connection. Please try again when online."),Xt.show(t,"error")}finally{this.isProcessing=!1}}async handleDeleteContract(e){if(this.isProcessing)return;this.isProcessing=!0;const{contractId:t}=this.getContractElements(e);if(!t)return Xt.show("Contract ID not found","error"),void(this.isProcessing=!1);if(await Xt.confirm("Are you sure you want to delete this contract?"))try{await wp.apiFetch({path:`/mythguard/v1/contracts/${t}`,method:"DELETE"}),Xt.show("Contract deleted successfully","success"),window.location.href="/contracts"}catch(e){console.error("Error deleting contract:",e),Xt.show("Failed to delete contract","error")}finally{this.isProcessing=!1}else this.isProcessing=!1}},new class{constructor(){this.activeElement=null,this.mainContent=document.getElementById("main"),this.bindEvents()}bindEvents(){document.addEventListener("click",this.handleClick.bind(this)),document.addEventListener("keydown",this.handleKeydown.bind(this))}handleKeydown(e){if("Escape"===e.key){const e=document.querySelector('.custom-modal[aria-hidden="false"]');e&&this.closeModal(e)}}openModal(e){this.activeElement=document.activeElement,e.setAttribute("aria-hidden","false"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),document.body.classList.add("body-no-scroll"),this.mainContent&&this.mainContent.setAttribute("inert",""),setTimeout((()=>{const t=e.querySelector("input");if(t)t.focus();else{const t=e.querySelector('button, [href], input, select, textarea, label, [tabindex]:not([tabindex="-1"])');t&&t.focus()}}),100)}closeModal(e){e.setAttribute("aria-hidden","true"),e.setAttribute("aria-modal","false"),this.mainContent&&this.mainContent.removeAttribute("inert"),document.body.classList.remove("body-no-scroll"),this.activeElement&&(this.activeElement.focus(),this.activeElement=null)}handleClick(e){const t=e.target.closest("[data-modal-trigger]"),n=e.target.closest("[data-modal-close]");if(t){const e=t.getAttribute("data-modal-trigger"),n=document.getElementById(e);n&&this.openModal(n)}if(n){const e=n.closest(".custom-modal");e&&this.closeModal(e)}}}},990:()=>{"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var i=function(t){t&&Object.keys(t).forEach((function(n){return e[n]=t[n]}))},a=0,o=t;a<o.length;a++)i(o[a]);return e})}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,a,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],s=!0,c=0;c<n.length;c++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,o<r&&(r=o));if(s){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[r,s,c]=n,l=0;if(r.some((t=>0!==e[t]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(c)var d=c(i)}for(t&&t(n);l<r.length;l++)o=r[l],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=globalThis.webpackChunkmythguard_theme=globalThis.webpackChunkmythguard_theme||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[350],(()=>i(245)));a=i.O(a)})();